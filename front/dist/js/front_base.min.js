function FrontBase(){}function Auth(){var t=this;t.markWrapper=$(".mask-wrapper"),t.scrollWrapper=$(".scroll-wrapper"),t.smsCaptchaBtn=$(".sms-captcha-btn")}FrontBase.prototype.listenAuthBoxHover=function(){var t=$(".auth-box"),n=$(".user-more-box");t.hover(function(){n.show()},function(){n.hide()})},FrontBase.prototype.listenImgCaptchaEvent=function(){var n=$(".img-captcha"),e=n.attr("src");n.click(function(){console.log(e);var t=e+"?change="+Math.random();n.attr({src:t})})},FrontBase.prototype.run=function(){this.listenAuthBoxHover(),this.listenImgCaptchaEvent()},$(function(){(new FrontBase).run()}),$(function(){$("#btn").click(function(){$(".mask-wrapper").show()}),$(".close-btn").click(function(){$(".mask-wrapper").hide()})}),Auth.prototype.showEvent=function(){this.markWrapper.show()},Auth.prototype.hideEvent=function(){this.markWrapper.hide()},Auth.prototype.listenShowHideEvent=function(){var t=this,n=$(".signin-btn"),e=$(".signup-btn"),s=$(".close-btn"),a=$(".scroll-wrapper");n.click(function(){t.showEvent(),a.css({left:0})}),e.click(function(){t.showEvent(),a.css({left:-400})}),s.click(function(){t.hideEvent()})},Auth.prototype.listenSwitch=function(){var n=this;$(".switch").click(function(){var t=n.scrollWrapper.css("left");(t=parseInt(t))<0?n.scrollWrapper.animate({left:"0"}):n.scrollWrapper.animate({left:"-400px"})})},Auth.prototype.listenSignin=function(){var t=$(".signin-group"),s=t.find("input[name='telephone']"),a=t.find("input[name='password']"),o=t.find("input[name='remember']");t.find(".submit-btn").click(function(){var t=s.val(),n=a.val(),e=o.prop("checked");$.post({url:"/account/login/",data:{telephone:t,password:n,remember:e?1:0},success:function(t){200==t.code?window.location.reload():window.dataMessage.getMessage(t)},fail:function(t){window.messageBox("出现了点小毛病, 重新试一试 ~")}})})},Auth.prototype.smsSuccessEvent=function(){var t=this;window.messageBox.showSuccess("发送成功");var n=3,e=setInterval(function(){t.smsCaptchaBtn.unbind("click"),n--,t.smsCaptchaBtn.addClass("disabled"),t.smsCaptchaBtn.text(n+" s"),n<=0&&(t.smsCaptchaBtn.removeClass("disabled"),t.smsCaptchaBtn.text("发送验证码"),clearInterval(e),t.listenSMSCaptchaEvent())},1e3)},Auth.prototype.listenSMSCaptchaEvent=function(){var n=this,e=$(".signup-group input[name=telephone]");n.smsCaptchaBtn.click(function(){var t=e.val();t?/^1[34578]\d{9}$/.test(t)?$.get({url:"/account/sms_captcha/",data:{telephone:t},success:function(t){200==t.code?n.smsSuccessEvent():window.messageBox.showError(t.msg)},fail:function(t){window.messageBox.showError(t)}}):window.messageBox.showError("请输入正确格式的手机号码"):window.messageBox.showError("请输入手机号码")})},Auth.prototype.listenRegisterEvent=function(){var m=$(".signup-group");m.find(".submit-btn").click(function(t){t.preventDefault();var n=m.find("input[name=telephone]"),e=m.find("input[name=sms_captcha]"),s=m.find("input[name=img_captcha]"),a=m.find("input[name=username]"),o=m.find("input[name=password1]"),i=m.find("input[name=password2]"),r=n.val(),c=e.val(),p=a.val(),u=o.val(),l=i.val(),h=s.val();$.post({url:"/account/register/",data:{telephone:r,sms_captcha:c,username:p,password1:u,password2:l,img_captcha:h},success:function(t){200==t.code?window.location.reload():window.dataMessage.getMessage(t)},fail:function(t){window.messageBox.showError("出了点小毛病")}})})},Auth.prototype.run=function(){this.listenShowHideEvent(),this.listenSwitch(),this.listenSignin(),this.listenSMSCaptchaEvent(),this.listenRegisterEvent()},$(function(){(new Auth).run()}),$(function(){template&&(template.defaults.imports.timeSince=function(t){var n=new Date(t),e=n.getTime(),s=((new Date).getTime()-e)/1e3;return s<60?"刚刚":60<=s&&s<3600?parseInt(s/60)+"分钟前":3600<=s&&s<86400?parseInt(s/3600)+"小时前":86400<=s&&s<2592e3?parseInt(s/86400)+"天前":n.getFullYear()+"/"+n.getMonth()+"/"+n.getDate()+" "+n.getDay()+":"+n.getMinutes()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250X2Jhc2UuanMiXSwibmFtZXMiOlsiRnJvbnRCYXNlIiwiQXV0aCIsInNlbGYiLCJ0aGlzIiwibWFya1dyYXBwZXIiLCIkIiwic2Nyb2xsV3JhcHBlciIsInNtc0NhcHRjaGFCdG4iLCJwcm90b3R5cGUiLCJsaXN0ZW5BdXRoQm94SG92ZXIiLCJhdXRoQm94IiwidXNlck1vcmVCb3giLCJob3ZlciIsInNob3ciLCJoaWRlIiwibGlzdGVuSW1nQ2FwdGNoYUV2ZW50IiwiaW1nQ2FwdGNoYSIsImltZ1NyYyIsImF0dHIiLCJjbGljayIsImNvbnNvbGUiLCJsb2ciLCJuZXdJbWdTcmMiLCJNYXRoIiwicmFuZG9tIiwic3JjIiwicnVuIiwic2hvd0V2ZW50IiwiaGlkZUV2ZW50IiwibGlzdGVuU2hvd0hpZGVFdmVudCIsInNpZ25pbkJ0biIsInNpZ251cEJ0biIsImNsb3NlQnRuIiwiY3NzIiwibGVmdCIsImxpc3RlblN3aXRjaCIsImN1cnJlbnRMZWZ0IiwicGFyc2VJbnQiLCJhbmltYXRlIiwibGlzdGVuU2lnbmluIiwic2lnbkdyb3VwIiwidGVsZXBob25lSW5wdXQiLCJmaW5kIiwicGFzc3dvcmRJbnB1dCIsInJlbWVtYmVyQ2hlY2tlZCIsInRlbGVwaG9uZSIsInZhbCIsInBhc3N3b3JkIiwicmVtZW1iZXIiLCJwcm9wIiwicG9zdCIsInVybCIsImRhdGEiLCJzdWNjZXNzIiwicmVzdWx0Iiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJkYXRhTWVzc2FnZSIsImdldE1lc3NhZ2UiLCJmYWlsIiwiZXJyb3IiLCJtZXNzYWdlQm94Iiwic21zU3VjY2Vzc0V2ZW50Iiwic2hvd1N1Y2Nlc3MiLCJjb3VudCIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJ1bmJpbmQiLCJhZGRDbGFzcyIsInRleHQiLCJyZW1vdmVDbGFzcyIsImNsZWFySW50ZXJ2YWwiLCJsaXN0ZW5TTVNDYXB0Y2hhRXZlbnQiLCJ0ZXN0IiwiZ2V0Iiwic2hvd0Vycm9yIiwibGlzdGVuUmVnaXN0ZXJFdmVudCIsInNpZ251cEdyb3VwIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInRlbGVwaG9uZUVsZSIsInNtc0NhcHRjaGFFbGUiLCJpbWdDYXB0Y2hhRWxlIiwidXNlcm5hbWVFbGUiLCJwYXNzd29yZDFFbGUiLCJwYXNzd29yZDJFbGUiLCJzbXNDYXB0Y2hhIiwidXNlcm5hbWUiLCJwYXNzd29yZDEiLCJwYXNzd29yZDIiLCJzbXNfY2FwdGNoYSIsImltZ19jYXB0Y2hhIiwidGVtcGxhdGUiLCJkZWZhdWx0cyIsImltcG9ydHMiLCJ0aW1lU2luY2UiLCJkYXRlVmFsdWUiLCJkYXRlIiwiRGF0ZSIsImRhdGVTdGFtcCIsImdldFRpbWUiLCJ0aW1lU3RhbXAiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImdldERheSIsImdldE1pbnV0ZXMiXSwibWFwcGluZ3MiOiJBQUNBLFNBQVNBLGFBa0RULFNBQVNDLE9BQ0wsSUFBSUMsRUFBT0MsS0FDWEQsRUFBS0UsWUFBY0MsRUFBRSxpQkFDckJILEVBQUtJLGNBQWdCRCxFQUFFLG1CQUN2QkgsRUFBS0ssY0FBZ0JGLEVBQUUsb0JBbEQzQkwsVUFBVVEsVUFBVUMsbUJBQXFCLFdBQ3JDLElBQUlDLEVBQVVMLEVBQUUsYUFDWk0sRUFBY04sRUFBRSxrQkFFcEJLLEVBQVFFLE1BQU0sV0FDVkQsRUFBWUUsUUFDYixXQUNDRixFQUFZRyxVQUlwQmQsVUFBVVEsVUFBVU8sc0JBQXdCLFdBQ3hDLElBQUlDLEVBQWFYLEVBQUUsZ0JBQ2ZZLEVBQVNELEVBQVdFLEtBQUssT0FDN0JGLEVBQVdHLE1BQU0sV0FDYkMsUUFBUUMsSUFBSUosR0FDWixJQUFJSyxFQUFZTCxFQUFTLFdBQWFNLEtBQUtDLFNBQzNDUixFQUFXRSxLQUFLLENBQUNPLElBQU9ILE9BS2hDdEIsVUFBVVEsVUFBVWtCLElBQU0sV0FDdEJ2QixLQUFLTSxxQkFDTE4sS0FBS1kseUJBR1RWLEVBQUUsWUFDa0IsSUFBSUwsV0FDVjBCLFFBTWRyQixFQUFFLFdB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QmpFLFNBQVNpRSxFQUFZLElBQ2xCLE1BQ0csTUFBYkEsR0FBd0JBLEVBQVksTUFDL0JqRSxTQUFTaUUsRUFBWSxNQUNsQixNQUNLLE9BQWJBLEdBQTZCQSxFQUFZLE9BQ3JDakUsU0FBU2lFLEVBQVksT0FDbEIsS0FFSEosRUFBS0ssY0FLRixJQUpGTCxFQUFLTSxXQUlXLElBSGxCTixFQUFLTyxVQUd5QixJQUY3QlAsRUFBS1EsU0FFcUMsSUFEeENSLEVBQUtTIiwiZmlsZSI6ImZyb250X2Jhc2UubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8g5aSE55CG55m75b2V5ZCOIOeUqOaIt+mAgOWHuuaYvuekulxyXG5mdW5jdGlvbiBGcm9udEJhc2UoKSB7XHJcblxyXG59XHJcblxyXG5Gcm9udEJhc2UucHJvdG90eXBlLmxpc3RlbkF1dGhCb3hIb3ZlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhdXRoQm94ID0gJChcIi5hdXRoLWJveFwiKTtcclxuICAgIHZhciB1c2VyTW9yZUJveCA9ICQoXCIudXNlci1tb3JlLWJveFwiKTtcclxuXHJcbiAgICBhdXRoQm94LmhvdmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB1c2VyTW9yZUJveC5zaG93KCk7XHJcbiAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdXNlck1vcmVCb3guaGlkZSgpO1xyXG4gICAgfSlcclxufTtcclxuXHJcbkZyb250QmFzZS5wcm90b3R5cGUubGlzdGVuSW1nQ2FwdGNoYUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGltZ0NhcHRjaGEgPSAkKFwiLmltZy1jYXB0Y2hhXCIpO1xyXG4gICAgdmFyIGltZ1NyYyA9IGltZ0NhcHRjaGEuYXR0cignc3JjJyk7XHJcbiAgICBpbWdDYXB0Y2hhLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhpbWdTcmMpO1xyXG4gICAgICAgIHZhciBuZXdJbWdTcmMgPSBpbWdTcmMgKyBcIj9jaGFuZ2U9XCIgKyBNYXRoLnJhbmRvbSgpO1xyXG4gICAgICAgIGltZ0NhcHRjaGEuYXR0cih7XCJzcmNcIjogbmV3SW1nU3JjfSk7XHJcbiAgICB9KTtcclxuXHJcbn07XHJcblxyXG5Gcm9udEJhc2UucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMubGlzdGVuQXV0aEJveEhvdmVyKCk7XHJcbiAgICB0aGlzLmxpc3RlbkltZ0NhcHRjaGFFdmVudCgpO1xyXG59O1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZnJvbnRCYXNlID0gbmV3IEZyb250QmFzZSgpO1xyXG4gICAgZnJvbnRCYXNlLnJ1bigpO1xyXG59KTtcclxuXHJcblxyXG4vLyAtLS0tLS0tLS0tLVxyXG4vLyDmqKHmgIHmoYbmjqfliLZcclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICAkKFwiI2J0blwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJChcIi5tYXNrLXdyYXBwZXJcIikuc2hvdygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJChcIi5jbG9zZS1idG5cIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoXCIubWFzay13cmFwcGVyXCIpLmhpZGUoKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8vIOeUqOaItyDms6jlhowv55m75b2VXHJcbmZ1bmN0aW9uIEF1dGgoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLm1hcmtXcmFwcGVyID0gJChcIi5tYXNrLXdyYXBwZXJcIik7XHJcbiAgICBzZWxmLnNjcm9sbFdyYXBwZXIgPSAkKFwiLnNjcm9sbC13cmFwcGVyXCIpO1xyXG4gICAgc2VsZi5zbXNDYXB0Y2hhQnRuID0gJChcIi5zbXMtY2FwdGNoYS1idG5cIik7XHJcbn1cclxuXHJcbkF1dGgucHJvdG90eXBlLnNob3dFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIOaYvuekuuaooeaAgeahhlxyXG4gICAgdGhpcy5tYXJrV3JhcHBlci5zaG93KCk7XHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5oaWRlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyDpmpDol4/mqKHmgIHmoYZcclxuICAgIHRoaXMubWFya1dyYXBwZXIuaGlkZSgpO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUubGlzdGVuU2hvd0hpZGVFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIOebkeWQrOeZu+W9leazqOWGjOaooeaAgeahhuaYvuekuumakOiXj1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHNpZ25pbkJ0biA9ICQoXCIuc2lnbmluLWJ0blwiKTtcclxuICAgIHZhciBzaWdudXBCdG4gPSAkKFwiLnNpZ251cC1idG5cIik7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSAkKFwiLmNsb3NlLWJ0blwiKTtcclxuICAgIHZhciBzY3JvbGxXcmFwcGVyID0gJChcIi5zY3JvbGwtd3JhcHBlclwiKTtcclxuXHJcbiAgICBzaWduaW5CdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc2hvd0V2ZW50KCk7XHJcbiAgICAgICAgc2Nyb2xsV3JhcHBlci5jc3Moe1wibGVmdFwiOiAwfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzaWdudXBCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc2hvd0V2ZW50KCk7XHJcbiAgICAgICAgc2Nyb2xsV3JhcHBlci5jc3Moe1wibGVmdFwiOiAtNDAwfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5oaWRlRXZlbnQoKTtcclxuICAgIH0pXHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5Td2l0Y2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyDnm5HlkKznmbvlvZXms6jlhozmqKHmgIHmoYbliIfmjaJcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICQoXCIuc3dpdGNoXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY3VycmVudExlZnQgPSBzZWxmLnNjcm9sbFdyYXBwZXIuY3NzKFwibGVmdFwiKTtcclxuICAgICAgICBjdXJyZW50TGVmdCA9IHBhcnNlSW50KGN1cnJlbnRMZWZ0KTtcclxuICAgICAgICBpZiAoY3VycmVudExlZnQgPCAwKSB7XHJcbiAgICAgICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5hbmltYXRlKHtcImxlZnRcIjogJzAnfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmFuaW1hdGUoe1wibGVmdFwiOiBcIi00MDBweFwifSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TaWduaW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyDnmbvlvZVcclxuICAgIHZhciBzaWduR3JvdXAgPSAkKFwiLnNpZ25pbi1ncm91cFwiKTtcclxuICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9IHNpZ25Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XHJcbiAgICB2YXIgcGFzc3dvcmRJbnB1dCA9IHNpZ25Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQnXVwiKTtcclxuICAgIHZhciByZW1lbWJlckNoZWNrZWQgPSBzaWduR3JvdXAuZmluZChcImlucHV0W25hbWU9J3JlbWVtYmVyJ11cIik7XHJcblxyXG4gICAgdmFyIHN1Ym1pdEJ0biA9IHNpZ25Hcm91cC5maW5kKCcuc3VibWl0LWJ0bicpO1xyXG5cclxuICAgIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRlbGVwaG9uZSA9IHRlbGVwaG9uZUlucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBwYXNzd29yZCA9IHBhc3N3b3JkSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHJlbWVtYmVyID0gcmVtZW1iZXJDaGVja2VkLnByb3AoJ2NoZWNrZWQnKTtcclxuXHJcbiAgICAgICAgJC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvYWNjb3VudC9sb2dpbi8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgIHRlbGVwaG9uZTogdGVsZXBob25lLFxyXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLFxyXG4gICAgICAgICAgICAgICAgcmVtZW1iZXI6IHJlbWVtYmVyID8gMSA6IDAsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgLy8g55m75b2V5raI5oGv5o+Q56S6XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZGF0YU1lc3NhZ2UuZ2V0TWVzc2FnZShyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnZmFpbCc6IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3goXCLlh7rnjrDkuobngrnlsI/mr5vnl4UsIOmHjeaWsOivleS4gOivlSB+XCIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLnNtc1N1Y2Nlc3NFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIOaJi+acuumqjOivgeazleWPkemAgeaIkOWKnywg55So5LqO6Kej57uRIGNsaWNrIOS6i+S7tlxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dTdWNjZXNzKFwi5Y+R6YCB5oiQ5YqfXCIpO1xyXG4gICAgdmFyIGNvdW50ID0gMztcclxuICAgIHZhciB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsgIC8vIOWAkuiuoeaXtuS4rSwg5peg5rOV5L2/55SoIGNsaWNr5LqL5Lu2XHJcbiAgICAgICAgc2VsZi5zbXNDYXB0Y2hhQnRuLnVuYmluZCgnY2xpY2snKTsgIC8vIHVuYmluZCDlj5bmtojoh6rouqvnmoTngrnlh7vkuovku7ZcclxuICAgICAgICBjb3VudC0tO1xyXG4gICAgICAgIHNlbGYuc21zQ2FwdGNoYUJ0bi5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICBzZWxmLnNtc0NhcHRjaGFCdG4udGV4dChjb3VudCArICcgcycpO1xyXG4gICAgICAgIGlmIChjb3VudCA8PSAwKSB7XHJcbiAgICAgICAgICAgIHNlbGYuc21zQ2FwdGNoYUJ0bi5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgc2VsZi5zbXNDYXB0Y2hhQnRuLnRleHQoJ+WPkemAgemqjOivgeeggScpO1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcclxuICAgICAgICAgICAgc2VsZi5saXN0ZW5TTVNDYXB0Y2hhRXZlbnQoKTsgIC8vIOWPr+S7pemHjeaWsOS9v+eUqCBjbGlja1xyXG4gICAgICAgIH1cclxuICAgIH0sIDEwMDApXHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TTVNDYXB0Y2hhRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyDnm5HlkKzlj5HpgIHmiYvmnLrpqozor4HnoIEgLS0gY2xpY2sg5LqL5Lu2XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgdGVsZXBob25lSW5wdXQgPSAkKFwiLnNpZ251cC1ncm91cCBpbnB1dFtuYW1lPXRlbGVwaG9uZV1cIik7XHJcblxyXG4gICAgc2VsZi5zbXNDYXB0Y2hhQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKCk7XHJcbiAgICAgICAgaWYgKCF0ZWxlcGhvbmUpIHtcclxuICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd0Vycm9yKFwi6K+36L6T5YWl5omL5py65Y+356CBXCIpO1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9IGVsc2UgaWYgKCEoL14xWzM0NTc4XVxcZHs5fSQvLnRlc3QodGVsZXBob25lKSkpIHtcclxuICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd0Vycm9yKCfor7fovpPlhaXmraPnoa7moLzlvI/nmoTmiYvmnLrlj7fnoIEnKTtcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkLmdldCh7XHJcbiAgICAgICAgICAgIHVybDogJy9hY2NvdW50L3Ntc19jYXB0Y2hhLycsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHRlbGVwaG9uZTogdGVsZXBob25lLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGFbJ2NvZGUnXSA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNtc1N1Y2Nlc3NFdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93RXJyb3IoZGF0YVsnbXNnJ10pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZhaWw6IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd0Vycm9yKGVycm9yKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUubGlzdGVuUmVnaXN0ZXJFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIOeUqOaIt+azqOWGjFxyXG4gICAgdmFyIHNpZ251cEdyb3VwID0gJChcIi5zaWdudXAtZ3JvdXBcIik7XHJcbiAgICB2YXIgc3VibWl0QnRuID0gc2lnbnVwR3JvdXAuZmluZChcIi5zdWJtaXQtYnRuXCIpO1xyXG4gICAgc3VibWl0QnRuLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIHRlbGVwaG9uZUVsZSA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPXRlbGVwaG9uZV1cIik7XHJcbiAgICAgICAgdmFyIHNtc0NhcHRjaGFFbGUgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT1zbXNfY2FwdGNoYV1cIik7XHJcbiAgICAgICAgdmFyIGltZ0NhcHRjaGFFbGUgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT1pbWdfY2FwdGNoYV1cIik7XHJcbiAgICAgICAgdmFyIHVzZXJuYW1lRWxlID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9dXNlcm5hbWVdXCIpO1xyXG4gICAgICAgIHZhciBwYXNzd29yZDFFbGUgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT1wYXNzd29yZDFdXCIpO1xyXG4gICAgICAgIHZhciBwYXNzd29yZDJFbGUgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT1wYXNzd29yZDJdXCIpO1xyXG5cclxuICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lRWxlLnZhbCgpO1xyXG4gICAgICAgIHZhciBzbXNDYXB0Y2hhID0gc21zQ2FwdGNoYUVsZS52YWwoKTtcclxuICAgICAgICB2YXIgdXNlcm5hbWUgPSB1c2VybmFtZUVsZS52YWwoKTtcclxuICAgICAgICB2YXIgcGFzc3dvcmQxID0gcGFzc3dvcmQxRWxlLnZhbCgpO1xyXG4gICAgICAgIHZhciBwYXNzd29yZDIgPSBwYXNzd29yZDJFbGUudmFsKCk7XHJcbiAgICAgICAgdmFyIGltZ0NhcHRjaGEgPSBpbWdDYXB0Y2hhRWxlLnZhbCgpO1xyXG5cclxuICAgICAgICAkLnBvc3Qoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYWNjb3VudC9yZWdpc3Rlci8nLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICB0ZWxlcGhvbmU6IHRlbGVwaG9uZSxcclxuICAgICAgICAgICAgICAgIHNtc19jYXB0Y2hhOiBzbXNDYXB0Y2hhLFxyXG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQxOiBwYXNzd29yZDEsXHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZDI6IHBhc3N3b3JkMixcclxuICAgICAgICAgICAgICAgIGltZ19jYXB0Y2hhOiBpbWdDYXB0Y2hhLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGFbJ2NvZGUnXSA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5kYXRhTWVzc2FnZS5nZXRNZXNzYWdlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmYWlsOiBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dFcnJvcihcIuWHuuS6hueCueWwj+avm+eXhVwiKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pO1xyXG5cclxuXHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmxpc3RlblNob3dIaWRlRXZlbnQoKTtcclxuICAgIHRoaXMubGlzdGVuU3dpdGNoKCk7XHJcbiAgICB0aGlzLmxpc3RlblNpZ25pbigpO1xyXG4gICAgdGhpcy5saXN0ZW5TTVNDYXB0Y2hhRXZlbnQoKTtcclxuICAgIHRoaXMubGlzdGVuUmVnaXN0ZXJFdmVudCgpO1xyXG59O1xyXG5cclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGF1dGggPSBuZXcgQXV0aCgpO1xyXG4gICAgYXV0aC5ydW4oKTtcclxufSk7XHJcblxyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAodGVtcGxhdGUpIHtcclxuICAgICAgICAvLyDlrprkuYkgYXJ0LXRlbXBsYXRlIOaooeadv+i/h+a7pOWZqFxyXG4gICAgICAgIHRlbXBsYXRlLmRlZmF1bHRzLmltcG9ydHMudGltZVNpbmNlID0gZnVuY3Rpb24gKGRhdGVWYWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGRhdGVWYWx1ZSk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlU3RhbXAgPSBkYXRlLmdldFRpbWUoKTtcclxuICAgICAgICAgICAgdmFyIG5vd1N0YW1wID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcclxuICAgICAgICAgICAgdmFyIHRpbWVTdGFtcCA9IChub3dTdGFtcCAtIGRhdGVTdGFtcCkgLyAxMDAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRpbWVTdGFtcCA8IDYwKSB7ICAvLyDkuIDliIbpkp/kuYvlhoVcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIuWImuWImlwiXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGltZVN0YW1wID49IDYwICYmIHRpbWVTdGFtcCA8ICg2MCAqIDYwKSkgeyAgLy8gMeWIhumSnyB+IDHlsI/ml7bpl7RcclxuICAgICAgICAgICAgICAgIHZhciBtaW51dGVzID0gcGFyc2VJbnQodGltZVN0YW1wIC8gNjApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1pbnV0ZXMgKyBcIuWIhumSn+WJjVwiXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGltZVN0YW1wID49IDYwICogNjAgJiYgdGltZVN0YW1wIDwgKDYwICogNjAgKiAyNCkpIHsgIC8vIDHlsI/ml7YgfiAx5aSp6Ze0XHJcbiAgICAgICAgICAgICAgICB2YXIgaG91cnMgPSBwYXJzZUludCh0aW1lU3RhbXAgLyAoNjAgKiA2MCkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGhvdXJzICsgXCLlsI/ml7bliY1cIlxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRpbWVTdGFtcCA+PSA2MCAqIDYwICogMjQgJiYgdGltZVN0YW1wIDwgKDYwICogNjAgKiAyNCAqIDMwKSkgeyAgLy8gMeWkqSB+IDHmnIhcclxuICAgICAgICAgICAgICAgIHZhciBkYXlzID0gcGFyc2VJbnQodGltZVN0YW1wIC8gKDYwICogNjAgKiAyNCkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRheXMgKyBcIuWkqeWJjVwiO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW9udGggPSBkYXRlLmdldE1vbnRoKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF5ID0gZGF0ZS5nZXREYXRlKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaG91ciA9IGRhdGUuZ2V0RGF5KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWludXRlID0gZGF0ZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geWVhciArIFwiL1wiICsgbW9udGggKyBcIi9cIiArIGRheSArIFwiIFwiICsgaG91ciArIFwiOlwiICsgbWludXRlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KTsiXX0=
