function PublishNews(){}PublishNews.prototype.initUEditor=function(){window.ue=UE.getEditor("ueditor",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"})},PublishNews.prototype.listenUploadEvent=function(){var o=$("#thumbnail-btn");o.change(function(){console.log(o);var e=o[0].files[0],t=new FormData;t.append("file",e),$.post({url:"/cms/upload/",data:t,processData:!1,contentType:!1,success:function(e){if(200==e.code){var t=e.data.url,o=$("#form-thumbnail");o.val(t),o.attr({disabled:!0}),window.messageBox.showSuccess("添加成功")}else window.dataMessage.getMessage(e)},fail:function(e){console.log(errro)}})})},PublishNews.prototype.qiniuUploadEvent=function(){var a=this;$("#thumbnail-btn").change(function(){var s=this.files[0];$.get({url:"/cms/qntoken/",success:function(e){if(200==e.code){var t=e.token,o=(new Date).getTime()+"."+s.name.split(".")[1];console.log("token:"+t+"key:"+o);var n={fname:o,params:{},mimeType:["image/png","image/jpg","image/jpeg"]},i={useCdnDomain:!0,retryCount:6,region:qiniu.region.z0};qiniu.upload(s,o,t,n,i).subscribe({next:a.handleFileUploadNext,error:a.handleFileUploadError,complete:a.handleFileUploadComplete})}else window.dataMessage.getMessage(e)},fail:function(e){window.messageBox.showError(e)}})})},PublishNews.prototype.handleFileUploadNext=function(e){var t=e.total.percent.toFixed(0)+"%";$("#progress-group").show();var o=$(".progress-bar");o.css({width:t}),o.text(t)},PublishNews.prototype.handleFileUploadError=function(e){window.messageBox.showError(e.message)},PublishNews.prototype.handleFileUploadComplete=function(e){$("#progress-group").hide(),$(".progress-bar").css({width:"0%"});var t="http://pwm9160nr.bkt.clouddn.com/"+e.key,o=$("#form-thumbnail");o.val(t),o.attr({disabled:!0}),window.messageBox.showSuccess("添加成功")},PublishNews.prototype.listenSubmitEvent=function(e){$("#submit-btn").click(function(e){e.preventDefault();var t=$("input[name=title]").val(),o=$("input[name=thumbnail]").val(),n=$("input[name=desc]").val(),i=$("select[name=category]").val(),s=window.ue.getContent();$.post({url:"/cms/news/publish/",data:{title:t,desc:n,thumbnail:o,category:i,content:s},success:function(e){200==e.code?swalert.alertSuccess("新闻发布成功",function(){window.location.reload()}):window.dataMessage.getMessage(e)},fail:function(e){window.messageBox.showError(e)}})})},PublishNews.prototype.run=function(){this.qiniuUploadEvent(),this.initUEditor(),this.listenSubmitEvent()},$(function(){(new PublishNews).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInB1Ymxpc2hfbmV3cy5qcyJdLCJuYW1lcyI6WyJQdWJsaXNoTmV3cyIsInByb3RvdHlwZSIsImluaXRVRWRpdG9yIiwid2luZG93IiwidWUiLCJVRSIsImdldEVkaXRvciIsImluaXRpYWxGcmFtZUhlaWdodCIsInNlcnZlclVybCIsImxpc3RlblVwbG9hZEV2ZW50IiwidXBsb2FkQnRuIiwiJCIsImNoYW5nZSIsImNvbnNvbGUiLCJsb2ciLCJmaWxlIiwiZmlsZXMiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwicG9zdCIsInVybCIsImRhdGEiLCJwcm9jZXNzRGF0YSIsImNvbnRlbnRUeXBlIiwic3VjY2VzcyIsInRodW1ibmFpbEZvcm1FbGUiLCJ2YWwiLCJhdHRyIiwiZGlzYWJsZWQiLCJtZXNzYWdlQm94Iiwic2hvd1N1Y2Nlc3MiLCJkYXRhTWVzc2FnZSIsImdldE1lc3NhZ2UiLCJmYWlsIiwiZXJyb3IiLCJlcnJybyIsInFpbml1VXBsb2FkRXZlbnQiLCJzZWxmIiwidGhpcyIsImdldCIsInRva2VuIiwia2V5IiwiRGF0ZSIsImdldFRpbWUiLCJuYW1lIiwic3BsaXQiLCJwdXRFeHRyYSIsImZuYW1lIiwicGFyYW1zIiwibWltZVR5cGUiLCJjb25maWciLCJ1c2VDZG5Eb21haW4iLCJyZXRyeUNvdW50IiwicmVnaW9uIiwicWluaXUiLCJ6MCIsInVwbG9hZCIsInN1YnNjcmliZSIsIm5leHQiLCJoYW5kbGVGaWxlVXBsb2FkTmV4dCIsImhhbmRsZUZpbGVVcGxvYWRFcnJvciIsImNvbXBsZXRlIiwiaGFuZGxlRmlsZVVwbG9hZENvbXBsZXRlIiwic2hvd0Vycm9yIiwicmVzcG9uc2UiLCJwZXJjZW50IiwidG90YWwiLCJ0b0ZpeGVkIiwic2hvdyIsInByb2dyZXNzQmFyIiwiY3NzIiwid2lkdGgiLCJ0ZXh0IiwibWVzc2FnZSIsImhpZGUiLCJsaW5rIiwibGlzdGVuU3VibWl0RXZlbnQiLCJldmVudCIsImNsaWNrIiwicHJldmVudERlZmF1bHQiLCJ0aXRsZSIsInRodW1ibmFpbCIsImRlc2MiLCJjYXRlZ29yeSIsImNvbnRlbnQiLCJnZXRDb250ZW50Iiwic3dhbGVydCIsImFsZXJ0U3VjY2VzcyIsImxvY2F0aW9uIiwicmVsb2FkIiwicnVuIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxlQUlUQSxZQUFZQyxVQUFVQyxZQUFjLFdBQ2hDQyxPQUFPQyxHQUFLQyxHQUFHQyxVQUFVLFVBQVcsQ0FDaENDLG1CQUFvQixJQUNwQkMsVUFBVyxzQkFLbkJSLFlBQVlDLFVBQVVRLGtCQUFvQixXQUV0QyxJQUFJQyxFQUFZQyxFQUFFLGtCQUNsQkQsRUFBVUUsT0FBTyxXQUNiQyxRQUFRQyxJQUFJSixHQUNaLElBQUlLLEVBQU9MLEVBQVUsR0FBR00sTUFBTSxHQUMxQkMsRUFBVyxJQUFJQyxTQUNuQkQsRUFBU0UsT0FBTyxPQUFRSixHQUN4QkosRUFBRVMsS0FBSyxDQUNIQyxJQUFLLGVBQ0xDLEtBQU1MLEVBQ05NLGFBQWEsRUFDYkMsYUFBYSxFQUNiQyxRQUFTLFNBQVVILEdBQ2YsR0FBb0IsS0FBaEJBLEVBQVcsS0FBVSxDQUNyQixJQUFJRCxFQUFNQyxFQUFXLEtBQU8sSUFDeEJJLEVBQW1CZixFQUFFLG1CQUN6QmUsRUFBaUJDLElBQUlOLEdBQ3JCSyxFQUFpQkUsS0FBSyxDQUFDQyxVQUFZLElBQ25DMUIsT0FBTzJCLFdBQVdDLFlBQVksYUFFOUI1QixPQUFPNkIsWUFBWUMsV0FBV1gsSUFHdENZLEtBQU0sU0FBVUMsR0FDWnRCLFFBQVFDLElBQUlzQixhQU01QnBDLFlBQVlDLFVBQVVvQyxpQkFBbUIsV0FHckMsSUFBSUMsRUFBT0MsS0FDSzVCLEVBQUUsa0JBQ1JDLE9BQU8sV0FDYixJQUFJRyxFQUFPd0IsS0FBS3ZCLE1BQU0sR0FDdEJMLEVBQUU2QixJQUFJLENBQ0ZuQixJQUFLLGdCQUNMSSxRQUFTLFNBQVVILEdBQ2YsR0FBb0IsS0FBaEJBLEVBQVcsS0FBVSxDQUNyQixJQUFJbUIsRUFBUW5CLEVBQVksTUFDcEJvQixHQUFNLElBQUtDLE1BQVFDLFVBQVksSUFBTTdCLEVBQUs4QixLQUFLQyxNQUFNLEtBQUssR0FDOURqQyxRQUFRQyxJQUFJLFNBQVcyQixFQUFRLE9BQVNDLEdBRXhDLElBQUlLLEVBQVcsQ0FDWEMsTUFBT04sRUFDUE8sT0FBUSxHQUNSQyxTQUFVLENBQUMsWUFBYSxZQUFhLGVBRXJDQyxFQUFTLENBQ1RDLGNBQWMsRUFDZEMsV0FBWSxFQUNaQyxPQUFRQyxNQUFNRCxPQUFPRSxJQUVSRCxNQUFNRSxPQUFPMUMsRUFBTTJCLEVBQUtELEVBQU9NLEVBQVVJLEdBQy9DTyxVQUFVLENBQ2pCQyxLQUFRckIsRUFBS3NCLHFCQUNiekIsTUFBU0csRUFBS3VCLHNCQUNkQyxTQUFZeEIsRUFBS3lCLGdDQUdyQjVELE9BQU82QixZQUFZQyxXQUFXWCxJQUd0Q1ksS0FBTSxTQUFVQyxHQUNaaEMsT0FBTzJCLFdBQVdrQyxVQUFVN0IsU0FNNUNuQyxZQUFZQyxVQUFVMkQscUJBQXVCLFNBQVVLLEdBRW5ELElBRUlDLEVBRFFELEVBQVNFLE1BQ0RELFFBQVFFLFFBQVEsR0FBSyxJQUNyQnpELEVBQUUsbUJBQ1IwRCxPQUNkLElBQUlDLEVBQWMzRCxFQUFFLGlCQUNwQjJELEVBQVlDLElBQUksQ0FBQ0MsTUFBT04sSUFDeEJJLEVBQVlHLEtBQUtQLElBR3JCbEUsWUFBWUMsVUFBVTRELHNCQUF3QixTQUFVMUIsR0FFcERoQyxPQUFPMkIsV0FBV2tDLFVBQVU3QixFQUFNdUMsVUFHdEMxRSxZQUFZQyxVQUFVOEQseUJBQTJCLFNBQVVFLEdBR25DdEQsRUFBRSxtQkFDUmdFLE9BQ0loRSxFQUFFLGlCQUNSNEQsSUFBSSxDQUFDQyxNQUFPLE9BRXhCLElBRUlJLEVBRlMsb0NBQ0VYLEVBQVN2QixJQUdwQmhCLEVBQW1CZixFQUFFLG1CQUN6QmUsRUFBaUJDLElBQUlpRCxHQUNyQmxELEVBQWlCRSxLQUFLLENBQUNDLFVBQVksSUFDbkMxQixPQUFPMkIsV0FBV0MsWUFBWSxTQUtsQy9CLFlBQVlDLFVBQVU0RSxrQkFBb0IsU0FBVUMsR0FDaENuRSxFQUFFLGVBQ1JvRSxNQUFNLFNBQVVELEdBQ3RCQSxFQUFNRSxpQkFDTixJQUFJQyxFQUFRdEUsRUFBRSxxQkFBcUJnQixNQUMvQnVELEVBQVl2RSxFQUFFLHlCQUF5QmdCLE1BQ3ZDd0QsRUFBT3hFLEVBQUUsb0JBQW9CZ0IsTUFDN0J5RCxFQUFXekUsRUFBRSx5QkFBeUJnQixNQUN0QzBELEVBQVVsRixPQUFPQyxHQUFHa0YsYUFDeEIzRSxFQUFFUyxLQUFLLENBQ0hDLElBQUsscUJBQ0xDLEtBQU0sQ0FDRjJELE1BQU9BLEVBQ1BFLEtBQU1BLEVBQ05ELFVBQVdBLEVBQ1hFLFNBQVVBLEVBQ1ZDLFFBQVNBLEdBRWI1RCxRQUFTLFNBQVVILEdBQ0ssS0FBaEJBLEVBQVcsS0FDWGlFLFFBQVFDLGFBQWEsU0FBVSxXQUMzQnJGLE9BQU9zRixTQUFTQyxXQUdwQnZGLE9BQU82QixZQUFZQyxXQUFXWCxJQUd0Q1ksS0FBTSxTQUFVQyxHQUNaaEMsT0FBTzJCLFdBQVdrQyxVQUFVN0IsU0FPNUNuQyxZQUFZQyxVQUFVMEYsSUFBTSxXQUN4QnBELEtBQUtGLG1CQUNMRSxLQUFLckMsY0FDTHFDLEtBQUtzQyxxQkFHVGxFLEVBQUUsWUFDb0IsSUFBSVgsYUFDVjJGIiwiZmlsZSI6InB1Ymxpc2hfbmV3cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBQdWJsaXNoTmV3cygpIHtcclxuXHJcbn1cclxuXHJcblB1Ymxpc2hOZXdzLnByb3RvdHlwZS5pbml0VUVkaXRvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHdpbmRvdy51ZSA9IFVFLmdldEVkaXRvcigndWVkaXRvcicsIHtcclxuICAgICAgICBpbml0aWFsRnJhbWVIZWlnaHQ6IDQwMCxcclxuICAgICAgICBzZXJ2ZXJVcmw6ICcvdWVkaXRvci91cGxvYWQvJyxcclxuICAgIH0pO1xyXG59O1xyXG5cclxuXHJcblB1Ymxpc2hOZXdzLnByb3RvdHlwZS5saXN0ZW5VcGxvYWRFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIOWwhuaWh+S7tuS4iuS8oOWIsOacrOWcsOacjeWKoeWZqCAo5bey5byD55SoKVxyXG4gICAgdmFyIHVwbG9hZEJ0biA9ICQoXCIjdGh1bWJuYWlsLWJ0blwiKTtcclxuICAgIHVwbG9hZEJ0bi5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHVwbG9hZEJ0bik7XHJcbiAgICAgICAgdmFyIGZpbGUgPSB1cGxvYWRCdG5bMF0uZmlsZXNbMF07XHJcbiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgZmlsZSk7XHJcbiAgICAgICAgJC5wb3N0KHtcclxuICAgICAgICAgICAgdXJsOiBcIi9jbXMvdXBsb2FkL1wiLFxyXG4gICAgICAgICAgICBkYXRhOiBmb3JtRGF0YSxcclxuICAgICAgICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlLFxyXG4gICAgICAgICAgICBjb250ZW50VHlwZTogZmFsc2UsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YVsnY29kZSddID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBkYXRhWydkYXRhJ11bJ3VybCddO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0aHVtYm5haWxGb3JtRWxlID0gJChcIiNmb3JtLXRodW1ibmFpbFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB0aHVtYm5haWxGb3JtRWxlLnZhbCh1cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRodW1ibmFpbEZvcm1FbGUuYXR0cih7XCJkaXNhYmxlZFwiOiB0cnVlfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoXCLmt7vliqDmiJDlip9cIilcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmRhdGFNZXNzYWdlLmdldE1lc3NhZ2UoZGF0YSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZmFpbDogZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJybyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufTtcclxuXHJcblB1Ymxpc2hOZXdzLnByb3RvdHlwZS5xaW5pdVVwbG9hZEV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8g5paH5Lu25LiK5Lyg55qE5LiD54mb5LqR5pyN5Yqh5ZmoXHJcbiAgICAvLyBodHRwczovL2RldmVsb3Blci5xaW5pdS5jb20va29kby9zZGsvMTI4My9qYXZhc2NyaXB0XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgdXBsb2FkQnRuID0gJChcIiN0aHVtYm5haWwtYnRuXCIpO1xyXG4gICAgdXBsb2FkQnRuLmNoYW5nZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZpbGUgPSB0aGlzLmZpbGVzWzBdO1xyXG4gICAgICAgICQuZ2V0KHtcclxuICAgICAgICAgICAgdXJsOiAnL2Ntcy9xbnRva2VuLycsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YVsnY29kZSddID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0b2tlbiA9IGRhdGFbJ3Rva2VuJ107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCkgKyAnLicgKyBmaWxlLm5hbWUuc3BsaXQoJy4nKVsxXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInRva2VuOlwiICsgdG9rZW4gKyAna2V5OicgKyBrZXkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHV0RXh0cmEgPSB7ICAvLyDpop3lpJblj4LmlbBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm5hbWU6IGtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7fSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWltZVR5cGU6IFsnaW1hZ2UvcG5nJywgJ2ltYWdlL2pwZycsICdpbWFnZS9qcGVnJ10sXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlnID0geyAgLy8g55u45YWz6YWN572u5L+h5oGvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZUNkbkRvbWFpbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0cnlDb3VudDogNixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiBxaW5pdS5yZWdpb24uejAsXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IHFpbml1LnVwbG9hZChmaWxlLCBrZXksIHRva2VuLCBwdXRFeHRyYSwgY29uZmlnKTtcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZhYmxlLnN1YnNjcmliZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0Jzogc2VsZi5oYW5kbGVGaWxlVXBsb2FkTmV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2Vycm9yJzogc2VsZi5oYW5kbGVGaWxlVXBsb2FkRXJyb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdjb21wbGV0ZSc6IHNlbGYuaGFuZGxlRmlsZVVwbG9hZENvbXBsZXRlXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmRhdGFNZXNzYWdlLmdldE1lc3NhZ2UoZGF0YSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZmFpbDogZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93RXJyb3IoZXJyb3IpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufTtcclxuXHJcblB1Ymxpc2hOZXdzLnByb3RvdHlwZS5oYW5kbGVGaWxlVXBsb2FkTmV4dCA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgLy8g5aSE55CG5LiK5Lyg6L+b5bqmXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgdG90YWwgPSByZXNwb25zZS50b3RhbDtcclxuICAgIHZhciBwZXJjZW50ID0gdG90YWwucGVyY2VudC50b0ZpeGVkKDApICsgJyUnOyAgLy8g5LiN6ZyA6KaB5bCP5pWw54K5XHJcbiAgICB2YXIgcHJvZ3Jlc3NHcm91cCA9ICQoXCIjcHJvZ3Jlc3MtZ3JvdXBcIik7XHJcbiAgICBwcm9ncmVzc0dyb3VwLnNob3coKTtcclxuICAgIHZhciBwcm9ncmVzc0JhciA9ICQoXCIucHJvZ3Jlc3MtYmFyXCIpO1xyXG4gICAgcHJvZ3Jlc3NCYXIuY3NzKHt3aWR0aDogcGVyY2VudH0pO1xyXG4gICAgcHJvZ3Jlc3NCYXIudGV4dChwZXJjZW50KTtcclxufTtcclxuXHJcblB1Ymxpc2hOZXdzLnByb3RvdHlwZS5oYW5kbGVGaWxlVXBsb2FkRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgIC8vIOWkhOeQhuS4iuS8oOWbvueJh+eahOmUmeivr1xyXG4gICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd0Vycm9yKGVycm9yLm1lc3NhZ2UpO1xyXG59O1xyXG5cclxuUHVibGlzaE5ld3MucHJvdG90eXBlLmhhbmRsZUZpbGVVcGxvYWRDb21wbGV0ZSA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgLy8g5o6l5pS25LiK5Lyg5a6M5oiQ5ZCO55qE5ZCO56uv6L+U5Zue5L+h5oGvXHJcbiAgICAvLyDov5Tlm546IGtleSAvIGhhc2hcclxuICAgIHZhciBwcm9ncmVzc0dyb3VwID0gJChcIiNwcm9ncmVzcy1ncm91cFwiKTtcclxuICAgIHByb2dyZXNzR3JvdXAuaGlkZSgpO1xyXG4gICAgdmFyIHByb2dyZXNzQmFyID0gJChcIi5wcm9ncmVzcy1iYXJcIik7XHJcbiAgICBwcm9ncmVzc0Jhci5jc3Moe3dpZHRoOiAwICsgJyUnfSk7XHJcblxyXG4gICAgdmFyIGRvbWFpbiA9IFwiaHR0cDovL3B3bTkxNjBuci5ia3QuY2xvdWRkbi5jb20vXCI7ICAvLyDkuIPniZvkupHmtYvor5Xln5/lkI1cclxuICAgIHZhciBmaWxlbmFtZSA9IHJlc3BvbnNlLmtleTtcclxuICAgIHZhciBsaW5rID0gZG9tYWluICsgZmlsZW5hbWU7XHJcblxyXG4gICAgdmFyIHRodW1ibmFpbEZvcm1FbGUgPSAkKFwiI2Zvcm0tdGh1bWJuYWlsXCIpO1xyXG4gICAgdGh1bWJuYWlsRm9ybUVsZS52YWwobGluayk7XHJcbiAgICB0aHVtYm5haWxGb3JtRWxlLmF0dHIoe1wiZGlzYWJsZWRcIjogdHJ1ZX0pO1xyXG4gICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoXCLmt7vliqDmiJDlip9cIik7XHJcblxyXG59O1xyXG5cclxuXHJcblB1Ymxpc2hOZXdzLnByb3RvdHlwZS5saXN0ZW5TdWJtaXRFdmVudCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgdmFyIHN1Ym1pdEJ0biA9ICQoXCIjc3VibWl0LWJ0blwiKTtcclxuICAgIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciB0aXRsZSA9ICQoXCJpbnB1dFtuYW1lPXRpdGxlXVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgdGh1bWJuYWlsID0gJChcImlucHV0W25hbWU9dGh1bWJuYWlsXVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgZGVzYyA9ICQoXCJpbnB1dFtuYW1lPWRlc2NdXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciBjYXRlZ29yeSA9ICQoXCJzZWxlY3RbbmFtZT1jYXRlZ29yeV1cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGNvbnRlbnQgPSB3aW5kb3cudWUuZ2V0Q29udGVudCgpO1xyXG4gICAgICAgICQucG9zdCh7XHJcbiAgICAgICAgICAgIHVybDogJy9jbXMvbmV3cy9wdWJsaXNoLycsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcclxuICAgICAgICAgICAgICAgIGRlc2M6IGRlc2MsXHJcbiAgICAgICAgICAgICAgICB0aHVtYm5haWw6IHRodW1ibmFpbCxcclxuICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBjYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhWydjb2RlJ10gPT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dhbGVydC5hbGVydFN1Y2Nlc3MoXCLmlrDpl7vlj5HluIPmiJDlip9cIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5kYXRhTWVzc2FnZS5nZXRNZXNzYWdlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmYWlsOiBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dFcnJvcihlcnJvcilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxufTtcclxuXHJcblB1Ymxpc2hOZXdzLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLnFpbml1VXBsb2FkRXZlbnQoKTtcclxuICAgIHRoaXMuaW5pdFVFZGl0b3IoKTtcclxuICAgIHRoaXMubGlzdGVuU3VibWl0RXZlbnQoKTtcclxufTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHB1Ymxpc2hOZXdzID0gbmV3IFB1Ymxpc2hOZXdzKCk7XHJcbiAgICBwdWJsaXNoTmV3cy5ydW4oKTtcclxufSk7Il19
