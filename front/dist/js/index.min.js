function Banner(){this.bannerWidth=798,this.bannerGroup=$("#banner-group"),this.index=1,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$("#banner-ul"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length,this.pageControl=$(".page-control")}function News(){this.page=2,this.category_id=0,this.loadMoreBtn=$("#load-more")}Banner.prototype.initBanner=function(){var n=this,e=n.liList.eq(0).clone(),t=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(e),n.bannerUl.prepend(t),n.bannerUl.css({width:n.bannerWidth*(n.bannerCount+2),left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,e=0;e<n.bannerCount;e++){var t=$("<li></li>");n.pageControl.append(t),0===e&&t.addClass("active")}n.pageControl.css({width:12*n.bannerCount+16+16*(n.bannerCount-1)})},Banner.prototype.toggleArrow=function(n){var e=this;n?(e.leftArrow.show(),e.rightArrow.show()):(e.leftArrow.hide(),e.rightArrow.hide())},Banner.prototype.animate=function(){var n=this;n.bannerUl.stop().animate({left:-798*n.index},500);var e=n.index;e=0===e?n.bannerCount-1:e===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(e).addClass("active").siblings().removeClass("active")},Banner.prototype.loop=function(){var n=this;this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerCount*n.bannerWidth}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenPageControl=function(){var t=this;t.pageControl.children("li").each(function(n,e){$(e).click(function(){t.index=n,t.animate()})})},Banner.prototype.run=function(){this.initBanner(),this.initPageControl(),this.loop(),this.listenBannerHover(),this.listenArrowClick(),this.listenPageControl()},News.prototype.listenLoadMoreEvent=function(){var i=this;i.loadMoreBtn.click(function(n){n.preventDefault(),$.get({url:"/news/list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200==n.code){var e=n.data;if(0<e.length){var t=template("news-item",{newses:e});$(".list-inner-group").append(t),i.page+=1}else i.loadMoreBtn.hide()}else window.dataMessage.getMessage(n)},fail:function(n){console.log(n)}})})},News.prototype.listenCategorySwitchEvent=function(){var a=this;$(".list-tab").children().click(function(){var r=$(this),o=r.attr("data-category");a.loadMoreBtn.show(),$.get({url:"/news/list/",data:{category_id:o,p:1},success:function(n){if(200==n.code){var e=n.data,t=template("news-item",{newses:e}),i=$(".list-inner-group");i.empty(),i.append(t),a.page=2,a.category_id=o,r.addClass("active").siblings().removeClass("active")}else window.dataMessage.getMessage(n)}})})},News.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){(new Banner).run(),(new News).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJXaWR0aCIsImJhbm5lckdyb3VwIiwiJCIsImluZGV4IiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVsIiwibGlMaXN0IiwiY2hpbGRyZW4iLCJiYW5uZXJDb3VudCIsImxlbmd0aCIsInBhZ2VDb250cm9sIiwiTmV3cyIsInBhZ2UiLCJjYXRlZ29yeV9pZCIsImxvYWRNb3JlQnRuIiwicHJvdG90eXBlIiwiaW5pdEJhbm5lciIsInNlbGYiLCJmaXJzdEJhbm5lciIsImVxIiwiY2xvbmUiLCJsYXN0QmFubmVyIiwiYXBwZW5kIiwicHJlcGVuZCIsImNzcyIsIndpZHRoIiwibGVmdCIsImluaXRQYWdlQ29udHJvbCIsImkiLCJjaXJjbGUiLCJhZGRDbGFzcyIsInRvZ2dsZUFycm93IiwiaXNTaG93Iiwic2hvdyIsImhpZGUiLCJhbmltYXRlIiwic3RvcCIsInNpYmxpbmdzIiwicmVtb3ZlQ2xhc3MiLCJsb29wIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsImxpc3RlbkFycm93Q2xpY2siLCJjbGljayIsImxpc3RlbkJhbm5lckhvdmVyIiwiaG92ZXIiLCJjbGVhckludGVydmFsIiwibGlzdGVuUGFnZUNvbnRyb2wiLCJlYWNoIiwib2JqIiwicnVuIiwibGlzdGVuTG9hZE1vcmVFdmVudCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJnZXQiLCJ1cmwiLCJkYXRhIiwicCIsInN1Y2Nlc3MiLCJuZXdzZXMiLCJ0cGwiLCJ0ZW1wbGF0ZSIsIndpbmRvdyIsImRhdGFNZXNzYWdlIiwiZ2V0TWVzc2FnZSIsImZhaWwiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJsaXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50IiwibGkiLCJhdHRyIiwidWwiLCJlbXB0eSJdLCJtYXBwaW5ncyI6IkFBbUJBLFNBQVNBLFNBQ0xDLEtBQUtDLFlBQWMsSUFDbkJELEtBQUtFLFlBQWNDLEVBQUUs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QUdDLEtBQUssaUJBRTFCdEQsRUFBS0gsWUFBWW1CLE9BQ2pCaEMsRUFBRXFELElBQUksQ0FDRkMsSUFBSyxjQUNMQyxLQUFNLENBQ0YzQyxZQUFhQSxFQUNiNEMsRUFORyxHQVFQQyxRQUFTLFNBQVVGLEdBQ2YsR0FBb0IsS0FBaEJBLEVBQVcsS0FBVSxDQUNyQixJQUFJRyxFQUFTSCxFQUFXLEtBQ3BCSSxFQUFNQyxTQUFTLFlBQWEsQ0FBQ0YsT0FBVUEsSUFDdkNhLEVBQUt2RSxFQUFFLHFCQUNYdUUsRUFBR0MsUUFDSEQsRUFBR2xELE9BQU9zQyxHQUNWM0MsRUFBS0wsS0FBTyxFQUNaSyxFQUFLSixZQUFjQSxFQUNuQnlELEVBQUd4QyxTQUFTLFVBQVVPLFdBQVdDLFlBQVksZUFFN0N3QixPQUFPQyxZQUFZQyxXQUFXUixTQU9sRDdDLEtBQUtJLFVBQVVtQyxJQUFNLFdBQ2pCcEQsS0FBS3FELHNCQUNMckQsS0FBS3VFLDZCQUdUcEUsRUFBRSxZQUNlLElBQUlKLFFBQ1ZxRCxPQUVJLElBQUl2QyxNQUNWdUMiLCJmaWxlIjoiaW5kZXgubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8g6Z2i5ZCR5a+56LGhXHJcbi8vIDEuIOa3u+WKoOWxnuaAp1xyXG4vLyDpgJrov4d0aGlz5YWz6ZSu5a2X77yM57uR5a6a5bGe5oCn77yM5bm25LiU5oyH5a6a5LuW55qE5YC844CCXHJcbi8vIOWOn+Wei+mTvlxyXG4vLyAyLiDmt7vliqDmlrnms5VcclxuLy8g5ZyoQmFubmVyLnByb3RvdHlwZeS4iue7keWumuaWueazleWwseWPr+S7peS6huOAglxyXG5cclxuLy8gZnVuY3Rpb24gQmFubmVyKCkge1xyXG4vLyAgICAgLy8g6L+Z5Liq6YeM6Z2i5YaZ55qE5Luj56CBXHJcbi8vICAgICAvLyDnm7jlvZPkuo7mmK9QeXRob27kuK3nmoRfX2luaXRfX+aWueazleeahOS7o+eggVxyXG4vL1xyXG4vLyBCYW5uZXIucHJvdG90eXBlLmdyZWV0ID0gZnVuY3Rpb24gKHdvcmQpIHtcclxuLy8gICAgIGNvbnNvbGUubG9nKCdoZWxsbyAnLHdvcmQpO1xyXG4vLyB9O1xyXG4vL1xyXG4vLyB2YXIgYmFubmVyID0gbmV3IEJhbm5lcigpO1xyXG4vLyBjb25zb2xlLmxvZyhiYW5uZXIucGVyc29uKTtcclxuLy8gYmFubmVyLmdyZWV0KCdoZWxsbyB3b3JsZCcpO1xyXG5cclxuZnVuY3Rpb24gQmFubmVyKCkge1xyXG4gICAgdGhpcy5iYW5uZXJXaWR0aCA9IDc5ODtcclxuICAgIHRoaXMuYmFubmVyR3JvdXAgPSAkKFwiI2Jhbm5lci1ncm91cFwiKTtcclxuICAgIHRoaXMuaW5kZXggPSAxO1xyXG4gICAgdGhpcy5sZWZ0QXJyb3cgPSAkKFwiLmxlZnQtYXJyb3dcIik7XHJcbiAgICB0aGlzLnJpZ2h0QXJyb3cgPSAkKFwiLnJpZ2h0LWFycm93XCIpO1xyXG4gICAgdGhpcy5iYW5uZXJVbCA9ICQoXCIjYmFubmVyLXVsXCIpO1xyXG4gICAgdGhpcy5saUxpc3QgPSB0aGlzLmJhbm5lclVsLmNoaWxkcmVuKFwibGlcIik7XHJcbiAgICB0aGlzLmJhbm5lckNvdW50ID0gdGhpcy5saUxpc3QubGVuZ3RoO1xyXG4gICAgdGhpcy5wYWdlQ29udHJvbCA9ICQoXCIucGFnZS1jb250cm9sXCIpO1xyXG59XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmluaXRCYW5uZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgZmlyc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcSgwKS5jbG9uZSgpO1xyXG4gICAgdmFyIGxhc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcShzZWxmLmJhbm5lckNvdW50IC0gMSkuY2xvbmUoKTtcclxuICAgIHNlbGYuYmFubmVyVWwuYXBwZW5kKGZpcnN0QmFubmVyKTtcclxuICAgIHNlbGYuYmFubmVyVWwucHJlcGVuZChsYXN0QmFubmVyKTtcclxuICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcIndpZHRoXCI6IHNlbGYuYmFubmVyV2lkdGggKiAoc2VsZi5iYW5uZXJDb3VudCArIDIpLCAnbGVmdCc6IC1zZWxmLmJhbm5lcldpZHRofSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmluaXRQYWdlQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5iYW5uZXJDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGNpcmNsZSA9ICQoXCI8bGk+PC9saT5cIik7XHJcbiAgICAgICAgc2VsZi5wYWdlQ29udHJvbC5hcHBlbmQoY2lyY2xlKTtcclxuICAgICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgICAgICBjaXJjbGUuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2VsZi5wYWdlQ29udHJvbC5jc3Moe1wid2lkdGhcIjogc2VsZi5iYW5uZXJDb3VudCAqIDEyICsgOCAqIDIgKyAxNiAqIChzZWxmLmJhbm5lckNvdW50IC0gMSl9KTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUudG9nZ2xlQXJyb3cgPSBmdW5jdGlvbiAoaXNTaG93KSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBpZiAoaXNTaG93KSB7XHJcbiAgICAgICAgc2VsZi5sZWZ0QXJyb3cuc2hvdygpO1xyXG4gICAgICAgIHNlbGYucmlnaHRBcnJvdy5zaG93KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNlbGYubGVmdEFycm93LmhpZGUoKTtcclxuICAgICAgICBzZWxmLnJpZ2h0QXJyb3cuaGlkZSgpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5hbmltYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5iYW5uZXJVbC5zdG9wKCkuYW5pbWF0ZSh7XCJsZWZ0XCI6IC03OTggKiBzZWxmLmluZGV4fSwgNTAwKTtcclxuICAgIHZhciBpbmRleCA9IHNlbGYuaW5kZXg7XHJcbiAgICBpZiAoaW5kZXggPT09IDApIHtcclxuICAgICAgICBpbmRleCA9IHNlbGYuYmFubmVyQ291bnQgLSAxO1xyXG4gICAgfSBlbHNlIGlmIChpbmRleCA9PT0gc2VsZi5iYW5uZXJDb3VudCArIDEpIHtcclxuICAgICAgICBpbmRleCA9IDA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGluZGV4ID0gc2VsZi5pbmRleCAtIDE7XHJcbiAgICB9XHJcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKCdsaScpLmVxKGluZGV4KS5hZGRDbGFzcyhcImFjdGl2ZVwiKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubG9vcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuaW5kZXggPj0gc2VsZi5iYW5uZXJDb3VudCArIDEpIHtcclxuICAgICAgICAgICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wibGVmdFwiOiAtc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gMjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgfSwgMjAwMCk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkFycm93Q2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxlZnRBcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuaW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgLy8gPT3vvJoxID09ICcxJ++8mnRydWVcclxuICAgICAgICAgICAgLy8gPT09PSAxICE9ICcxJ1xyXG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJsZWZ0XCI6IC1zZWxmLmJhbm5lckNvdW50ICogc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gc2VsZi5iYW5uZXJDb3VudCAtIDE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5pbmRleC0tO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHNlbGYucmlnaHRBcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuaW5kZXggPT09IHNlbGYuYmFubmVyQ291bnQgKyAxKSB7XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjogLXNlbGYuYmFubmVyV2lkdGh9KTtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IDI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5CYW5uZXJIb3ZlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHRoaXMuYmFubmVyR3JvdXAuaG92ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIOesrOS4gOS4quWHveaVsOaYr++8jOaKium8oOagh+enu+WKqOWIsGJhbm5lcuS4iuS8muaJp+ihjOeahOWHveaVsFxyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc2VsZi50aW1lcik7XHJcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyh0cnVlKTtcclxuICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyDnrKzkuozkuKrlh73mlbDmmK/vvIzmiorpvKDmoIfku45iYW5uZXLkuIrnp7votbDkvJrmiafooYznmoTlh73mlbBcclxuICAgICAgICBzZWxmLmxvb3AoKTtcclxuICAgICAgICBzZWxmLnRvZ2dsZUFycm93KGZhbHNlKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5QYWdlQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oXCJsaVwiKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgb2JqKSB7XHJcbiAgICAgICAgJChvYmopLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmluaXRCYW5uZXIoKTtcclxuICAgIHRoaXMuaW5pdFBhZ2VDb250cm9sKCk7XHJcbiAgICB0aGlzLmxvb3AoKTtcclxuICAgIHRoaXMubGlzdGVuQmFubmVySG92ZXIoKTtcclxuICAgIHRoaXMubGlzdGVuQXJyb3dDbGljaygpO1xyXG4gICAgdGhpcy5saXN0ZW5QYWdlQ29udHJvbCgpO1xyXG59O1xyXG5cclxuXHJcbi8vIOmmlumhteaWsOmXu+WKoOi9vVxyXG5mdW5jdGlvbiBOZXdzKCkge1xyXG4gICAgdGhpcy5wYWdlID0gMjsgIC8vIOW9k+WJjeiOt+WPlueahOaYryBcIuesrOWHoOmhtVwiXHJcbiAgICB0aGlzLmNhdGVnb3J5X2lkID0gMDtcclxuICAgIHRoaXMubG9hZE1vcmVCdG4gPSAkKFwiI2xvYWQtbW9yZVwiKTtcclxufVxyXG5cclxuTmV3cy5wcm90b3R5cGUubGlzdGVuTG9hZE1vcmVFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIGFqYXgg5Yqg6L295pu05aSa5paw6Ze7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxvYWRNb3JlQnRuLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJC5nZXQoe1xyXG4gICAgICAgICAgICB1cmw6ICcvbmV3cy9saXN0LycsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHA6IHNlbGYucGFnZSxcclxuICAgICAgICAgICAgICAgIGNhdGVnb3J5X2lkOiBzZWxmLmNhdGVnb3J5X2lkLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGFbJ2NvZGUnXSA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c2VzID0gZGF0YVsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdzZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJuZXdzLWl0ZW1cIiwge1wibmV3c2VzXCI6IG5ld3Nlc30pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdWwgPSAkKFwiLmxpc3QtaW5uZXItZ3JvdXBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsLmFwcGVuZCh0cGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRNb3JlQnRuLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZGF0YU1lc3NhZ2UuZ2V0TWVzc2FnZShkYXRhKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmYWlsOiBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pO1xyXG59O1xyXG5cclxuTmV3cy5wcm90b3R5cGUubGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBsaXN0VGFiID0gJChcIi5saXN0LXRhYlwiKTtcclxuICAgIGxpc3RUYWIuY2hpbGRyZW4oKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGxpID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgY2F0ZWdvcnlfaWQgPSBsaS5hdHRyKFwiZGF0YS1jYXRlZ29yeVwiKTtcclxuICAgICAgICB2YXIgcGFnZSA9IDE7XHJcbiAgICAgICAgc2VsZi5sb2FkTW9yZUJ0bi5zaG93KCk7XHJcbiAgICAgICAgJC5nZXQoe1xyXG4gICAgICAgICAgICB1cmw6ICcvbmV3cy9saXN0LycsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGNhdGVnb3J5X2lkOiBjYXRlZ29yeV9pZCxcclxuICAgICAgICAgICAgICAgIHA6IHBhZ2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhWydjb2RlJ10gPT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IGRhdGFbJ2RhdGEnXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJuZXdzLWl0ZW1cIiwge1wibmV3c2VzXCI6IG5ld3Nlc30pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1bCA9ICQoXCIubGlzdC1pbm5lci1ncm91cFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB1bC5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVsLmFwcGVuZCh0cGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZSA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYXRlZ29yeV9pZCA9IGNhdGVnb3J5X2lkO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmRhdGFNZXNzYWdlLmdldE1lc3NhZ2UoZGF0YSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KTtcclxufTtcclxuXHJcbk5ld3MucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMubGlzdGVuTG9hZE1vcmVFdmVudCgpO1xyXG4gICAgdGhpcy5saXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50KCk7XHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBiYW5uZXIgPSBuZXcgQmFubmVyKCk7XHJcbiAgICBiYW5uZXIucnVuKCk7XHJcblxyXG4gICAgdmFyIG5ld3MgPSBuZXcgTmV3cygpO1xyXG4gICAgbmV3cy5ydW4oKTtcclxufSk7Il19
