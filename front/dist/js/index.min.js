function Banner(){this.bannerWidth=798,this.bannerGroup=$("#banner-group"),this.index=1,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$("#banner-ul"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length,this.pageControl=$(".page-control")}function News(){this.page=2,template.defaults.imports.timeSince=function(n){var e=new Date(n),t=e.getTime(),r=((new Date).getTime()-t)/1e3;return r<60?"刚刚":60<=r&&r<3600?parseInt(r/60)+"分钟前":3600<=r&&r<86400?parseInt(r/3600)+"小时前":86400<=r&&r<2592e3?parseInt(r/86400)+"天前":e.getFullYear()+"/"+e.getMonth()+"/"+e.getDate()+" "+e.getDay()+":"+e.getMinutes()}}Banner.prototype.initBanner=function(){var n=this,e=n.liList.eq(0).clone(),t=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(e),n.bannerUl.prepend(t),n.bannerUl.css({width:n.bannerWidth*(n.bannerCount+2),left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,e=0;e<n.bannerCount;e++){var t=$("<li></li>");n.pageControl.append(t),0===e&&t.addClass("active")}n.pageControl.css({width:12*n.bannerCount+16+16*(n.bannerCount-1)})},Banner.prototype.toggleArrow=function(n){var e=this;n?(e.leftArrow.show(),e.rightArrow.show()):(e.leftArrow.hide(),e.rightArrow.hide())},Banner.prototype.animate=function(){var n=this;n.bannerUl.animate({left:-798*n.index},500);var e=n.index;e=0===e?n.bannerCount-1:e===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(e).addClass("active").siblings().removeClass("active")},Banner.prototype.loop=function(){var n=this;this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerCount*n.bannerWidth}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenPageControl=function(){var t=this;t.pageControl.children("li").each(function(n,e){$(e).click(function(){t.index=n,t.animate()})})},Banner.prototype.run=function(){this.initBanner(),this.initPageControl(),this.loop(),this.listenBannerHover(),this.listenArrowClick(),this.listenPageControl()},News.prototype.listenLoadMoreEvent=function(){var r=this,i=$("#load-more");i.click(function(n){n.preventDefault(),$.get({url:"/news/list/",data:{p:r.page},success:function(n){if(200==n.code){var e=n.data;if(0<e.length){var t=template("news-item",{newses:e});$(".list-inner-group").append(t),r.page+=1}else i.hide()}else window.dataMessage.getMessage(n)},fail:function(n){console.log(n)}})})},News.prototype.run=function(){this.listenLoadMoreEvent()},$(function(){(new Banner).run(),(new News).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJXaWR0aCIsImJhbm5lckdyb3VwIiwiJCIsImluZGV4IiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVsIiwibGlMaXN0IiwiY2hpbGRyZW4iLCJiYW5uZXJDb3VudCIsImxlbmd0aCIsInBhZ2VDb250cm9sIiwiTmV3cyIsInBhZ2UiLCJ0ZW1wbGF0ZSIsImRlZmF1bHRzIiwiaW1wb3J0cyIsInRpbWVTaW5jZSIsImRhdGVWYWx1ZSIsImRhdGUiLCJEYXRlIiwiZGF0ZVN0YW1wIiwiZ2V0VGltZSIsInRpbWVTdGFtcCIsInBhcnNlSW50IiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJnZXREYXkiLCJnZXRNaW51dGVzIiwicHJvdG90eXBlIiwiaW5pdEJhbm5lciIsInNlbGYiLCJmaXJzdEJhbm5lciIsImVxIiwiY2xvbmUiLCJsYXN0QmFubmVyIiwiYXBwZW5kIiwicHJlcGVuZCIsImNzcyIsIndpZHRoIiwibGVmdCIsImluaXRQYWdlQ29udHJvbCIsImkiLCJjaXJjbGUiLCJhZGRDbGFzcyIsInRvZ2dsZUFycm93IiwiaXNTaG93Iiwic2hvdyIsImhpZGUiLCJhbmltYXRlIiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsImxvb3AiLCJ0aW1lciIsInNldEludGVydmFsIiwibGlzdGVuQXJyb3dDbGljayIsImNsaWNrIiwibGlzdGVuQmFubmVySG92ZXIiLCJob3ZlciIsImNsZWFySW50ZXJ2YWwiLCJsaXN0ZW5QYWdlQ29udHJvbCIsImVhY2giLCJvYmoiLCJydW4iLCJsaXN0ZW5Mb2FkTW9yZUV2ZW50IiwibG9hZE1vcmVCdG4iLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiZ2V0IiwidXJsIiwiZGF0YSIsInAiLCJzdWNjZXNzIiwibmV3c2VzIiwidHBsIiwid2luZG93IiwiZGF0YU1lc3NhZ2UiLCJnZXRNZXNzYWdlIiwiZmFpbCIsImVy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TUFBTSxTQUFVVSxHQUN4QkEsRUFBTUMsaUJBQ05sRSxFQUFFbUUsSUFBSSxDQUNGQyxJQUFLLGNBQ0xDLEtBQU0sQ0FDRkMsRUFBR3hDLEVBQUtuQixNQUVaNEQsUUFBUyxTQUFVRixHQUNmLEdBQW9CLEtBQWhCQSxFQUFXLEtBQVUsQ0FDckIsSUFBSUcsRUFBU0gsRUFBVyxLQUN4QixHQUFvQixFQUFoQkcsRUFBT2hFLE9BQVksQ0FDbkIsSUFBSWlFLEVBQU03RCxTQUFTLFlBQWEsQ0FBQzRELE9BQVVBLElBQ2xDeEUsRUFBRSxxQkFDUm1DLE9BQU9zQyxHQUNWM0MsRUFBS25CLE1BQVEsT0FFYnFELEVBQVlqQixZQUloQjJCLE9BQU9DLFlBQVlDLFdBQVdQLElBR3RDUSxLQUFNLFNBQVVDLEdBQ1pDLFFBQVFDLElBQUlGLFNBTTVCcEUsS0FBS2tCLFVBQVVrQyxJQUFNLFdBQ2pCakUsS0FBS2tFLHVCQUdUL0QsRUFBRSxZQUNlLElBQUlKLFFBQ1ZrRSxPQUVJLElBQUlwRCxNQUNWb0QiLCJmaWxlIjoiaW5kZXgubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8g6Z2i5ZCR5a+56LGhXHJcbi8vIDEuIOa3u+WKoOWxnuaAp1xyXG4vLyDpgJrov4d0aGlz5YWz6ZSu5a2X77yM57uR5a6a5bGe5oCn77yM5bm25LiU5oyH5a6a5LuW55qE5YC844CCXHJcbi8vIOWOn+Wei+mTvlxyXG4vLyAyLiDmt7vliqDmlrnms5VcclxuLy8g5ZyoQmFubmVyLnByb3RvdHlwZeS4iue7keWumuaWueazleWwseWPr+S7peS6huOAglxyXG5cclxuLy8gZnVuY3Rpb24gQmFubmVyKCkge1xyXG4vLyAgICAgLy8g6L+Z5Liq6YeM6Z2i5YaZ55qE5Luj56CBXHJcbi8vICAgICAvLyDnm7jlvZPkuo7mmK9QeXRob27kuK3nmoRfX2luaXRfX+aWueazleeahOS7o+eggVxyXG4vL1xyXG4vLyBCYW5uZXIucHJvdG90eXBlLmdyZWV0ID0gZnVuY3Rpb24gKHdvcmQpIHtcclxuLy8gICAgIGNvbnNvbGUubG9nKCdoZWxsbyAnLHdvcmQpO1xyXG4vLyB9O1xyXG4vL1xyXG4vLyB2YXIgYmFubmVyID0gbmV3IEJhbm5lcigpO1xyXG4vLyBjb25zb2xlLmxvZyhiYW5uZXIucGVyc29uKTtcclxuLy8gYmFubmVyLmdyZWV0KCdoZWxsbyB3b3JsZCcpO1xyXG5cclxuZnVuY3Rpb24gQmFubmVyKCkge1xyXG4gICAgdGhpcy5iYW5uZXJXaWR0aCA9IDc5ODtcclxuICAgIHRoaXMuYmFubmVyR3JvdXAgPSAkKFwiI2Jhbm5lci1ncm91cFwiKTtcclxuICAgIHRoaXMuaW5kZXggPSAxO1xyXG4gICAgdGhpcy5sZWZ0QXJyb3cgPSAkKFwiLmxlZnQtYXJyb3dcIik7XHJcbiAgICB0aGlzLnJpZ2h0QXJyb3cgPSAkKFwiLnJpZ2h0LWFycm93XCIpO1xyXG4gICAgdGhpcy5iYW5uZXJVbCA9ICQoXCIjYmFubmVyLXVsXCIpO1xyXG4gICAgdGhpcy5saUxpc3QgPSB0aGlzLmJhbm5lclVsLmNoaWxkcmVuKFwibGlcIik7XHJcbiAgICB0aGlzLmJhbm5lckNvdW50ID0gdGhpcy5saUxpc3QubGVuZ3RoO1xyXG4gICAgdGhpcy5wYWdlQ29udHJvbCA9ICQoXCIucGFnZS1jb250cm9sXCIpO1xyXG59XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmluaXRCYW5uZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgZmlyc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcSgwKS5jbG9uZSgpO1xyXG4gICAgdmFyIGxhc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcShzZWxmLmJhbm5lckNvdW50IC0gMSkuY2xvbmUoKTtcclxuICAgIHNlbGYuYmFubmVyVWwuYXBwZW5kKGZpcnN0QmFubmVyKTtcclxuICAgIHNlbGYuYmFubmVyVWwucHJlcGVuZChsYXN0QmFubmVyKTtcclxuICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcIndpZHRoXCI6IHNlbGYuYmFubmVyV2lkdGggKiAoc2VsZi5iYW5uZXJDb3VudCArIDIpLCAnbGVmdCc6IC1zZWxmLmJhbm5lcldpZHRofSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmluaXRQYWdlQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5iYW5uZXJDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGNpcmNsZSA9ICQoXCI8bGk+PC9saT5cIik7XHJcbiAgICAgICAgc2VsZi5wYWdlQ29udHJvbC5hcHBlbmQoY2lyY2xlKTtcclxuICAgICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgICAgICBjaXJjbGUuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2VsZi5wYWdlQ29udHJvbC5jc3Moe1wid2lkdGhcIjogc2VsZi5iYW5uZXJDb3VudCAqIDEyICsgOCAqIDIgKyAxNiAqIChzZWxmLmJhbm5lckNvdW50IC0gMSl9KTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUudG9nZ2xlQXJyb3cgPSBmdW5jdGlvbiAoaXNTaG93KSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBpZiAoaXNTaG93KSB7XHJcbiAgICAgICAgc2VsZi5sZWZ0QXJyb3cuc2hvdygpO1xyXG4gICAgICAgIHNlbGYucmlnaHRBcnJvdy5zaG93KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNlbGYubGVmdEFycm93LmhpZGUoKTtcclxuICAgICAgICBzZWxmLnJpZ2h0QXJyb3cuaGlkZSgpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5hbmltYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5iYW5uZXJVbC5hbmltYXRlKHtcImxlZnRcIjogLTc5OCAqIHNlbGYuaW5kZXh9LCA1MDApO1xyXG4gICAgdmFyIGluZGV4ID0gc2VsZi5pbmRleDtcclxuICAgIGlmIChpbmRleCA9PT0gMCkge1xyXG4gICAgICAgIGluZGV4ID0gc2VsZi5iYW5uZXJDb3VudCAtIDE7XHJcbiAgICB9IGVsc2UgaWYgKGluZGV4ID09PSBzZWxmLmJhbm5lckNvdW50ICsgMSkge1xyXG4gICAgICAgIGluZGV4ID0gMDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaW5kZXggPSBzZWxmLmluZGV4IC0gMTtcclxuICAgIH1cclxuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oJ2xpJykuZXEoaW5kZXgpLmFkZENsYXNzKFwiYWN0aXZlXCIpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5sb29wID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoc2VsZi5pbmRleCA+PSBzZWxmLmJhbm5lckNvdW50ICsgMSkge1xyXG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJsZWZ0XCI6IC1zZWxmLmJhbm5lcldpZHRofSk7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSAyO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXgrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcbiAgICB9LCAyMDAwKTtcclxufTtcclxuXHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkFycm93Q2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxlZnRBcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuaW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgLy8gPT3vvJoxID09ICcxJ++8mnRydWVcclxuICAgICAgICAgICAgLy8gPT09PSAxICE9ICcxJ1xyXG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJsZWZ0XCI6IC1zZWxmLmJhbm5lckNvdW50ICogc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gc2VsZi5iYW5uZXJDb3VudCAtIDE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5pbmRleC0tO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHNlbGYucmlnaHRBcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuaW5kZXggPT09IHNlbGYuYmFubmVyQ291bnQgKyAxKSB7XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjogLXNlbGYuYmFubmVyV2lkdGh9KTtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IDI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5CYW5uZXJIb3ZlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHRoaXMuYmFubmVyR3JvdXAuaG92ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIOesrOS4gOS4quWHveaVsOaYr++8jOaKium8oOagh+enu+WKqOWIsGJhbm5lcuS4iuS8muaJp+ihjOeahOWHveaVsFxyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc2VsZi50aW1lcik7XHJcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyh0cnVlKTtcclxuICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyDnrKzkuozkuKrlh73mlbDmmK/vvIzmiorpvKDmoIfku45iYW5uZXLkuIrnp7votbDkvJrmiafooYznmoTlh73mlbBcclxuICAgICAgICBzZWxmLmxvb3AoKTtcclxuICAgICAgICBzZWxmLnRvZ2dsZUFycm93KGZhbHNlKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5QYWdlQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oXCJsaVwiKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgb2JqKSB7XHJcbiAgICAgICAgJChvYmopLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmluaXRCYW5uZXIoKTtcclxuICAgIHRoaXMuaW5pdFBhZ2VDb250cm9sKCk7XHJcbiAgICB0aGlzLmxvb3AoKTtcclxuICAgIHRoaXMubGlzdGVuQmFubmVySG92ZXIoKTtcclxuICAgIHRoaXMubGlzdGVuQXJyb3dDbGljaygpO1xyXG4gICAgdGhpcy5saXN0ZW5QYWdlQ29udHJvbCgpO1xyXG59O1xyXG5cclxuXHJcbi8vIOmmlumhteaWsOmXu+WKoOi9vVxyXG5mdW5jdGlvbiBOZXdzKCkge1xyXG4gICAgdGhpcy5wYWdlID0gMjsgIC8vIOW9k+WJjeiOt+WPlueahOaYryBcIuesrOWHoOmhtVwiXHJcblxyXG4gICAgLy8g5a6a5LmJIGFydC10ZW1wbGF0ZSDmqKHmnb/ov4fmu6TlmahcclxuICAgIHRlbXBsYXRlLmRlZmF1bHRzLmltcG9ydHMudGltZVNpbmNlID0gZnVuY3Rpb24gKGRhdGVWYWx1ZSkge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZGF0ZVZhbHVlKTtcclxuICAgICAgICB2YXIgZGF0ZVN0YW1wID0gZGF0ZS5nZXRUaW1lKCk7XHJcbiAgICAgICAgdmFyIG5vd1N0YW1wID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcclxuICAgICAgICB2YXIgdGltZVN0YW1wID0gKG5vd1N0YW1wIC0gZGF0ZVN0YW1wKSAvIDEwMDA7XHJcblxyXG4gICAgICAgIGlmICh0aW1lU3RhbXAgPCA2MCkgeyAgLy8g5LiA5YiG6ZKf5LmL5YaFXHJcbiAgICAgICAgICAgIHJldHVybiBcIuWImuWImlwiXHJcbiAgICAgICAgfSBlbHNlIGlmICh0aW1lU3RhbXAgPj0gNjAgJiYgdGltZVN0YW1wIDwgKDYwICogNjApKSB7ICAvLyAx5YiG6ZKfIH4gMeWwj+aXtumXtFxyXG4gICAgICAgICAgICB2YXIgbWludXRlcyA9IHBhcnNlSW50KHRpbWVTdGFtcCAvIDYwKTtcclxuICAgICAgICAgICAgcmV0dXJuIG1pbnV0ZXMgKyBcIuWIhumSn+WJjVwiXHJcbiAgICAgICAgfSBlbHNlIGlmICh0aW1lU3RhbXAgPj0gNjAgKiA2MCAmJiB0aW1lU3RhbXAgPCAoNjAgKiA2MCAqIDI0KSkgeyAgLy8gMeWwj+aXtiB+IDHlpKnpl7RcclxuICAgICAgICAgICAgdmFyIGhvdXJzID0gcGFyc2VJbnQodGltZVN0YW1wIC8gKDYwICogNjApKTtcclxuICAgICAgICAgICAgcmV0dXJuIGhvdXJzICsgXCLlsI/ml7bliY1cIlxyXG4gICAgICAgIH0gZWxzZSBpZiAodGltZVN0YW1wID49IDYwICogNjAgKiAyNCAmJiB0aW1lU3RhbXAgPCAoNjAgKiA2MCAqIDI0ICogMzApKSB7ICAvLyAx5aSpIH4gMeaciFxyXG4gICAgICAgICAgICB2YXIgZGF5cyA9IHBhcnNlSW50KHRpbWVTdGFtcCAvICg2MCAqIDYwICogMjQpKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRheXMgKyBcIuWkqeWJjVwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICB2YXIgbW9udGggPSBkYXRlLmdldE1vbnRoKCk7XHJcbiAgICAgICAgICAgIHZhciBkYXkgPSBkYXRlLmdldERhdGUoKTtcclxuICAgICAgICAgICAgdmFyIGhvdXIgPSBkYXRlLmdldERheSgpO1xyXG4gICAgICAgICAgICB2YXIgbWludXRlID0gZGF0ZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB5ZWFyICsgXCIvXCIgKyBtb250aCArIFwiL1wiICsgZGF5ICsgXCIgXCIgKyBob3VyICsgXCI6XCIgKyBtaW51dGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5OZXdzLnByb3RvdHlwZS5saXN0ZW5Mb2FkTW9yZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gYWpheCDliqDovb3mm7TlpJrmlrDpl7tcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBsb2FkTW9yZUJ0biA9ICQoXCIjbG9hZC1tb3JlXCIpO1xyXG4gICAgbG9hZE1vcmVCdG4uY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkLmdldCh7XHJcbiAgICAgICAgICAgIHVybDogJy9uZXdzL2xpc3QvJyxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgcDogc2VsZi5wYWdlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGFbJ2NvZGUnXSA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c2VzID0gZGF0YVsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdzZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJuZXdzLWl0ZW1cIiwge1wibmV3c2VzXCI6IG5ld3Nlc30pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdWwgPSAkKFwiLmxpc3QtaW5uZXItZ3JvdXBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsLmFwcGVuZCh0cGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkTW9yZUJ0bi5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmRhdGFNZXNzYWdlLmdldE1lc3NhZ2UoZGF0YSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZmFpbDogZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KTtcclxufTtcclxuXHJcbk5ld3MucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMubGlzdGVuTG9hZE1vcmVFdmVudCgpO1xyXG59O1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYmFubmVyID0gbmV3IEJhbm5lcigpO1xyXG4gICAgYmFubmVyLnJ1bigpO1xyXG5cclxuICAgIHZhciBuZXdzID0gbmV3IE5ld3MoKTtcclxuICAgIG5ld3MucnVuKCk7XHJcbn0pOyJdfQ==
