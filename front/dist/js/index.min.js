function Banner(){this.bannerWidth=798,this.bannerGroup=$("#banner-group"),this.index=1,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$("#banner-ul"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length,this.pageControl=$(".page-control")}function News(){this.page=2,this.category_id=0,this.loadMoreBtn=$("#load-more")}Banner.prototype.initBanner=function(){var n=this,e=n.liList.eq(0).clone(),t=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(e),n.bannerUl.prepend(t),n.bannerUl.css({width:n.bannerWidth*(n.bannerCount+2),left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,e=0;e<n.bannerCount;e++){var t=$("<li></li>");n.pageControl.append(t),0===e&&t.addClass("active")}n.pageControl.css({width:12*n.bannerCount+16+16*(n.bannerCount-1)})},Banner.prototype.toggleArrow=function(n){var e=this;n?(e.leftArrow.show(),e.rightArrow.show()):(e.leftArrow.hide(),e.rightArrow.hide())},Banner.prototype.animate=function(){var n=this;n.bannerUl.animate({left:-798*n.index},500);var e=n.index;e=0===e?n.bannerCount-1:e===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(e).addClass("active").siblings().removeClass("active")},Banner.prototype.loop=function(){var n=this;this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerCount*n.bannerWidth}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenPageControl=function(){var t=this;t.pageControl.children("li").each(function(n,e){$(e).click(function(){t.index=n,t.animate()})})},Banner.prototype.run=function(){this.initBanner(),this.initPageControl(),this.loop(),this.listenBannerHover(),this.listenArrowClick(),this.listenPageControl()},News.prototype.listenLoadMoreEvent=function(){var i=this;i.loadMoreBtn.click(function(n){n.preventDefault(),$.get({url:"/news/list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200==n.code){var e=n.data;if(0<e.length){var t=template("news-item",{newses:e});$(".list-inner-group").append(t),i.page+=1}else i.loadMoreBtn.hide()}else window.dataMessage.getMessage(n)},fail:function(n){console.log(n)}})})},News.prototype.listenCategorySwitchEvent=function(){var a=this;$(".list-tab").children().click(function(){var r=$(this),o=r.attr("data-category");a.loadMoreBtn.show(),$.get({url:"/news/list/",data:{category_id:o,p:1},success:function(n){if(200==n.code){var e=n.data,t=template("news-item",{newses:e}),i=$(".list-inner-group");i.empty(),i.append(t),a.page=2,a.category_id=o,r.addClass("active").siblings().removeClass("active")}else window.dataMessage.getMessage(n)}})})},News.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){(new Banner).run(),(new News).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJXaWR0aCIsImJhbm5lckdyb3VwIiwiJCIsImluZGV4IiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVsIiwibGlMaXN0IiwiY2hpbGRyZW4iLCJiYW5uZXJDb3VudCIsImxlbmd0aCIsInBhZ2VDb250cm9sIiwiTmV3cyIsInBhZ2UiLCJjYXRlZ29yeV9pZCIsImxvYWRNb3JlQnRuIiwicHJvdG90eXBlIiwiaW5pdEJhbm5lciIsInNlbGYiLCJmaXJzdEJhbm5lciIsImVxIiwiY2xvbmUiLCJsYXN0QmFubmVyIiwiYXBwZW5kIiwicHJlcGVuZCIsImNzcyIsIndpZHRoIiwibGVmdCIsImluaXRQYWdlQ29udHJvbCIsImkiLCJjaXJjbGUiLCJhZGRDbGFzcyIsInRvZ2dsZUFycm93IiwiaXNTaG93Iiwic2hvdyIsImhpZGUiLCJhbmltYXRlIiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsImxvb3AiLCJ0aW1lciIsInNldEludGVydmFsIiwibGlzdGVuQXJyb3dDbGljayIsImNsaWNrIiwibGlzdGVuQmFubmVySG92ZXIiLCJob3ZlciIsImNsZWFySW50ZXJ2YWwiLCJsaXN0ZW5QYWdlQ29udHJvbCIsImVhY2giLCJvYmoiLCJydW4iLCJsaXN0ZW5Mb2FkTW9yZUV2ZW50IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImdldCIsInVybCIsImRhdGEiLCJwIiwic3VjY2VzcyIsIm5ld3NlcyIsInRwbCIsInRlbXBsYXRlIiwid2luZG93IiwiZGF0YU1lc3NhZ2UiLCJnZXRNZXNzYWdlIiwiZmFpbCIsImVycm9yIiwiY29uc29sZSIsImxvZyIsImxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQiLCJsaSIsImF0dHIiLCJ1bCIsImVtcHR5Il0sIm1hcHBpbmdzIjoiQUFtQkEsU0FBU0EsU0FDTEMsS0FBS0MsWUFBYyxJQUNuQkQsS0FBS0UsWUFBY0MsRUFBRSxpQkFDckJI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MUJyRCxFQUFLSCxZQUFZbUIsT0FDakJoQyxFQUFFb0QsSUFBSSxDQUNGQyxJQUFLLGNBQ0xDLEtBQU0sQ0FDRjFDLFlBQWFBLEVBQ2IyQyxFQU5HLEdBUVBDLFFBQVMsU0FBVUYsR0FDZixHQUFvQixLQUFoQkEsRUFBVyxLQUFVLENBQ3JCLElBQUlHLEVBQVNILEVBQVcsS0FDcEJJLEVBQU1DLFNBQVMsWUFBYSxDQUFDRixPQUFVQSxJQUN2Q2EsRUFBS3RFLEVBQUUscUJBQ1hzRSxFQUFHQyxRQUNIRCxFQUFHakQsT0FBT3FDLEdBQ1YxQyxFQUFLTCxLQUFPLEVBQ1pLLEVBQUtKLFlBQWNBLEVBQ25Cd0QsRUFBR3ZDLFNBQVMsVUFBVU0sV0FBV0MsWUFBWSxlQUU3Q3dCLE9BQU9DLFlBQVlDLFdBQVdSLFNBT2xENUMsS0FBS0ksVUFBVWtDLElBQU0sV0FDakJuRCxLQUFLb0Qsc0JBQ0xwRCxLQUFLc0UsNkJBR1RuRSxFQUFFLFlBQ2UsSUFBSUosUUFDVm9ELE9BRUksSUFBSXRDLE1BQ1ZzQyIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyDpnaLlkJHlr7nosaFcclxuLy8gMS4g5re75Yqg5bGe5oCnXHJcbi8vIOmAmui/h3RoaXPlhbPplK7lrZfvvIznu5HlrprlsZ7mgKfvvIzlubbkuJTmjIflrprku5bnmoTlgLzjgIJcclxuLy8g5Y6f5Z6L6ZO+XHJcbi8vIDIuIOa3u+WKoOaWueazlVxyXG4vLyDlnKhCYW5uZXIucHJvdG90eXBl5LiK57uR5a6a5pa55rOV5bCx5Y+v5Lul5LqG44CCXHJcblxyXG4vLyBmdW5jdGlvbiBCYW5uZXIoKSB7XHJcbi8vICAgICAvLyDov5nkuKrph4zpnaLlhpnnmoTku6PnoIFcclxuLy8gICAgIC8vIOebuOW9k+S6juaYr1B5dGhvbuS4reeahF9faW5pdF9f5pa55rOV55qE5Luj56CBXHJcbi8vXHJcbi8vIEJhbm5lci5wcm90b3R5cGUuZ3JlZXQgPSBmdW5jdGlvbiAod29yZCkge1xyXG4vLyAgICAgY29uc29sZS5sb2coJ2hlbGxvICcsd29yZCk7XHJcbi8vIH07XHJcbi8vXHJcbi8vIHZhciBiYW5uZXIgPSBuZXcgQmFubmVyKCk7XHJcbi8vIGNvbnNvbGUubG9nKGJhbm5lci5wZXJzb24pO1xyXG4vLyBiYW5uZXIuZ3JlZXQoJ2hlbGxvIHdvcmxkJyk7XHJcblxyXG5mdW5jdGlvbiBCYW5uZXIoKSB7XHJcbiAgICB0aGlzLmJhbm5lcldpZHRoID0gNzk4O1xyXG4gICAgdGhpcy5iYW5uZXJHcm91cCA9ICQoXCIjYmFubmVyLWdyb3VwXCIpO1xyXG4gICAgdGhpcy5pbmRleCA9IDE7XHJcbiAgICB0aGlzLmxlZnRBcnJvdyA9ICQoXCIubGVmdC1hcnJvd1wiKTtcclxuICAgIHRoaXMucmlnaHRBcnJvdyA9ICQoXCIucmlnaHQtYXJyb3dcIik7XHJcbiAgICB0aGlzLmJhbm5lclVsID0gJChcIiNiYW5uZXItdWxcIik7XHJcbiAgICB0aGlzLmxpTGlzdCA9IHRoaXMuYmFubmVyVWwuY2hpbGRyZW4oXCJsaVwiKTtcclxuICAgIHRoaXMuYmFubmVyQ291bnQgPSB0aGlzLmxpTGlzdC5sZW5ndGg7XHJcbiAgICB0aGlzLnBhZ2VDb250cm9sID0gJChcIi5wYWdlLWNvbnRyb2xcIik7XHJcbn1cclxuXHJcbkJhbm5lci5wcm90b3R5cGUuaW5pdEJhbm5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBmaXJzdEJhbm5lciA9IHNlbGYubGlMaXN0LmVxKDApLmNsb25lKCk7XHJcbiAgICB2YXIgbGFzdEJhbm5lciA9IHNlbGYubGlMaXN0LmVxKHNlbGYuYmFubmVyQ291bnQgLSAxKS5jbG9uZSgpO1xyXG4gICAgc2VsZi5iYW5uZXJVbC5hcHBlbmQoZmlyc3RCYW5uZXIpO1xyXG4gICAgc2VsZi5iYW5uZXJVbC5wcmVwZW5kKGxhc3RCYW5uZXIpO1xyXG4gICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wid2lkdGhcIjogc2VsZi5iYW5uZXJXaWR0aCAqIChzZWxmLmJhbm5lckNvdW50ICsgMiksICdsZWZ0JzogLXNlbGYuYmFubmVyV2lkdGh9KTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUuaW5pdFBhZ2VDb250cm9sID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLmJhbm5lckNvdW50OyBpKyspIHtcclxuICAgICAgICB2YXIgY2lyY2xlID0gJChcIjxsaT48L2xpPlwiKTtcclxuICAgICAgICBzZWxmLnBhZ2VDb250cm9sLmFwcGVuZChjaXJjbGUpO1xyXG4gICAgICAgIGlmIChpID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNpcmNsZS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNzcyh7XCJ3aWR0aFwiOiBzZWxmLmJhbm5lckNvdW50ICogMTIgKyA4ICogMiArIDE2ICogKHNlbGYuYmFubmVyQ291bnQgLSAxKX0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS50b2dnbGVBcnJvdyA9IGZ1bmN0aW9uIChpc1Nob3cpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIGlmIChpc1Nob3cpIHtcclxuICAgICAgICBzZWxmLmxlZnRBcnJvdy5zaG93KCk7XHJcbiAgICAgICAgc2VsZi5yaWdodEFycm93LnNob3coKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2VsZi5sZWZ0QXJyb3cuaGlkZSgpO1xyXG4gICAgICAgIHNlbGYucmlnaHRBcnJvdy5oaWRlKCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmFuaW1hdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmJhbm5lclVsLmFuaW1hdGUoe1wibGVmdFwiOiAtNzk4ICogc2VsZi5pbmRleH0sIDUwMCk7XHJcbiAgICB2YXIgaW5kZXggPSBzZWxmLmluZGV4O1xyXG4gICAgaWYgKGluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgaW5kZXggPSBzZWxmLmJhbm5lckNvdW50IC0gMTtcclxuICAgIH0gZWxzZSBpZiAoaW5kZXggPT09IHNlbGYuYmFubmVyQ291bnQgKyAxKSB7XHJcbiAgICAgICAgaW5kZXggPSAwO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpbmRleCA9IHNlbGYuaW5kZXggLSAxO1xyXG4gICAgfVxyXG4gICAgc2VsZi5wYWdlQ29udHJvbC5jaGlsZHJlbignbGknKS5lcShpbmRleCkuYWRkQ2xhc3MoXCJhY3RpdmVcIikuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxvb3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChzZWxmLmluZGV4ID49IHNlbGYuYmFubmVyQ291bnQgKyAxKSB7XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjogLXNlbGYuYmFubmVyV2lkdGh9KTtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IDI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0sIDIwMDApO1xyXG59O1xyXG5cclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQXJyb3dDbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubGVmdEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoc2VsZi5pbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICAvLyA9Pe+8mjEgPT0gJzEn77yadHJ1ZVxyXG4gICAgICAgICAgICAvLyA9PT09IDEgIT0gJzEnXHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjogLXNlbGYuYmFubmVyQ291bnQgKiBzZWxmLmJhbm5lcldpZHRofSk7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBzZWxmLmJhbm5lckNvdW50IC0gMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4LS07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2VsZi5yaWdodEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoc2VsZi5pbmRleCA9PT0gc2VsZi5iYW5uZXJDb3VudCArIDEpIHtcclxuICAgICAgICAgICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wibGVmdFwiOiAtc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gMjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkJhbm5lckhvdmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdGhpcy5iYW5uZXJHcm91cC5ob3ZlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8g56ys5LiA5Liq5Ye95pWw5piv77yM5oqK6byg5qCH56e75Yqo5YiwYmFubmVy5LiK5Lya5omn6KGM55qE5Ye95pWwXHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbChzZWxmLnRpbWVyKTtcclxuICAgICAgICBzZWxmLnRvZ2dsZUFycm93KHRydWUpO1xyXG4gICAgfSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIOesrOS6jOS4quWHveaVsOaYr++8jOaKium8oOagh+S7jmJhbm5lcuS4iuenu+i1sOS8muaJp+ihjOeahOWHveaVsFxyXG4gICAgICAgIHNlbGYubG9vcCgpO1xyXG4gICAgICAgIHNlbGYudG9nZ2xlQXJyb3coZmFsc2UpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlblBhZ2VDb250cm9sID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5wYWdlQ29udHJvbC5jaGlsZHJlbihcImxpXCIpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBvYmopIHtcclxuICAgICAgICAkKG9iaikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuaW5pdEJhbm5lcigpO1xyXG4gICAgdGhpcy5pbml0UGFnZUNvbnRyb2woKTtcclxuICAgIHRoaXMubG9vcCgpO1xyXG4gICAgdGhpcy5saXN0ZW5CYW5uZXJIb3ZlcigpO1xyXG4gICAgdGhpcy5saXN0ZW5BcnJvd0NsaWNrKCk7XHJcbiAgICB0aGlzLmxpc3RlblBhZ2VDb250cm9sKCk7XHJcbn07XHJcblxyXG5cclxuLy8g6aaW6aG15paw6Ze75Yqg6L29XHJcbmZ1bmN0aW9uIE5ld3MoKSB7XHJcbiAgICB0aGlzLnBhZ2UgPSAyOyAgLy8g5b2T5YmN6I635Y+W55qE5pivIFwi56ys5Yeg6aG1XCJcclxuICAgIHRoaXMuY2F0ZWdvcnlfaWQgPSAwO1xyXG4gICAgdGhpcy5sb2FkTW9yZUJ0biA9ICQoXCIjbG9hZC1tb3JlXCIpO1xyXG59XHJcblxyXG5OZXdzLnByb3RvdHlwZS5saXN0ZW5Mb2FkTW9yZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gYWpheCDliqDovb3mm7TlpJrmlrDpl7tcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubG9hZE1vcmVCdG4uY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkLmdldCh7XHJcbiAgICAgICAgICAgIHVybDogJy9uZXdzL2xpc3QvJyxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgcDogc2VsZi5wYWdlLFxyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnlfaWQ6IHNlbGYuY2F0ZWdvcnlfaWQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YVsnY29kZSddID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzZXMgPSBkYXRhWydkYXRhJ107XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld3Nlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcIm5ld3MtaXRlbVwiLCB7XCJuZXdzZXNcIjogbmV3c2VzfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1bCA9ICQoXCIubGlzdC1pbm5lci1ncm91cFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdWwuYXBwZW5kKHRwbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZSArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZE1vcmVCdG4uaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5kYXRhTWVzc2FnZS5nZXRNZXNzYWdlKGRhdGEpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZhaWw6IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5OZXdzLnByb3RvdHlwZS5saXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGxpc3RUYWIgPSAkKFwiLmxpc3QtdGFiXCIpO1xyXG4gICAgbGlzdFRhYi5jaGlsZHJlbigpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbGkgPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciBjYXRlZ29yeV9pZCA9IGxpLmF0dHIoXCJkYXRhLWNhdGVnb3J5XCIpO1xyXG4gICAgICAgIHZhciBwYWdlID0gMTtcclxuICAgICAgICBzZWxmLmxvYWRNb3JlQnRuLnNob3coKTtcclxuICAgICAgICAkLmdldCh7XHJcbiAgICAgICAgICAgIHVybDogJy9uZXdzL2xpc3QvJyxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnlfaWQ6IGNhdGVnb3J5X2lkLFxyXG4gICAgICAgICAgICAgICAgcDogcGFnZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGFbJ2NvZGUnXSA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c2VzID0gZGF0YVsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcIm5ld3MtaXRlbVwiLCB7XCJuZXdzZXNcIjogbmV3c2VzfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVsID0gJChcIi5saXN0LWlubmVyLWdyb3VwXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVsLmVtcHR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdWwuYXBwZW5kKHRwbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNhdGVnb3J5X2lkID0gY2F0ZWdvcnlfaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbGkuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZGF0YU1lc3NhZ2UuZ2V0TWVzc2FnZShkYXRhKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pO1xyXG59O1xyXG5cclxuTmV3cy5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5saXN0ZW5Mb2FkTW9yZUV2ZW50KCk7XHJcbiAgICB0aGlzLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQoKTtcclxufTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGJhbm5lciA9IG5ldyBCYW5uZXIoKTtcclxuICAgIGJhbm5lci5ydW4oKTtcclxuXHJcbiAgICB2YXIgbmV3cyA9IG5ldyBOZXdzKCk7XHJcbiAgICBuZXdzLnJ1bigpO1xyXG59KTsiXX0=
